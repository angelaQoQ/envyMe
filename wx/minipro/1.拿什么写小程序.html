<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>1.搭建页面结构 | 用心</title>
    <meta name="description" content="活着">
    <link rel="icon" href="./press_avatar.png">
    
    <link rel="preload" href="/assets/css/0.styles.18be6571.css" as="style"><link rel="preload" href="/assets/js/app.314208ec.js" as="script"><link rel="preload" href="/assets/js/2.3dbe4ac7.js" as="script"><link rel="preload" href="/assets/js/47.e9efc34d.js" as="script"><link rel="prefetch" href="/assets/js/10.09fa1052.js"><link rel="prefetch" href="/assets/js/11.d4f3cc01.js"><link rel="prefetch" href="/assets/js/12.845c0d45.js"><link rel="prefetch" href="/assets/js/13.3eea8c07.js"><link rel="prefetch" href="/assets/js/14.680482c3.js"><link rel="prefetch" href="/assets/js/15.0e1a4de8.js"><link rel="prefetch" href="/assets/js/16.c2b57ca6.js"><link rel="prefetch" href="/assets/js/17.f6d53abe.js"><link rel="prefetch" href="/assets/js/18.32518103.js"><link rel="prefetch" href="/assets/js/19.27feb172.js"><link rel="prefetch" href="/assets/js/20.06be6d6e.js"><link rel="prefetch" href="/assets/js/21.9e865467.js"><link rel="prefetch" href="/assets/js/22.630cda10.js"><link rel="prefetch" href="/assets/js/23.a9756b8d.js"><link rel="prefetch" href="/assets/js/24.eb4d423b.js"><link rel="prefetch" href="/assets/js/25.ab6e4013.js"><link rel="prefetch" href="/assets/js/26.6ef779c7.js"><link rel="prefetch" href="/assets/js/27.d15ed41b.js"><link rel="prefetch" href="/assets/js/28.086a9083.js"><link rel="prefetch" href="/assets/js/29.31e7789f.js"><link rel="prefetch" href="/assets/js/3.788b749c.js"><link rel="prefetch" href="/assets/js/30.78afe3a4.js"><link rel="prefetch" href="/assets/js/31.6fa1a3fc.js"><link rel="prefetch" href="/assets/js/32.31b3c7c5.js"><link rel="prefetch" href="/assets/js/33.3bd402a1.js"><link rel="prefetch" href="/assets/js/34.26464d62.js"><link rel="prefetch" href="/assets/js/35.4cd98e92.js"><link rel="prefetch" href="/assets/js/36.23ac981b.js"><link rel="prefetch" href="/assets/js/37.0b28d024.js"><link rel="prefetch" href="/assets/js/38.1fe985a9.js"><link rel="prefetch" href="/assets/js/39.6822d10c.js"><link rel="prefetch" href="/assets/js/4.14f39196.js"><link rel="prefetch" href="/assets/js/40.0ed7188a.js"><link rel="prefetch" href="/assets/js/41.6f24726d.js"><link rel="prefetch" href="/assets/js/42.54e402eb.js"><link rel="prefetch" href="/assets/js/43.54835e7c.js"><link rel="prefetch" href="/assets/js/44.df4c1b7e.js"><link rel="prefetch" href="/assets/js/45.0873fde0.js"><link rel="prefetch" href="/assets/js/46.4796fd27.js"><link rel="prefetch" href="/assets/js/48.6a329478.js"><link rel="prefetch" href="/assets/js/49.173f63c6.js"><link rel="prefetch" href="/assets/js/5.38464c3f.js"><link rel="prefetch" href="/assets/js/50.864c3c6f.js"><link rel="prefetch" href="/assets/js/51.6a00893c.js"><link rel="prefetch" href="/assets/js/52.48b20bcd.js"><link rel="prefetch" href="/assets/js/6.e83a0ec3.js"><link rel="prefetch" href="/assets/js/7.1bd9d7d8.js"><link rel="prefetch" href="/assets/js/8.84adaaaa.js"><link rel="prefetch" href="/assets/js/9.0aada2c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.18be6571.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">用心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Js</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Js_basis/" class="nav-link">Js基础</a></li><li class="dropdown-item"><!----> <a href="/Js_Advance/" class="nav-link">Js高级</a></li><li class="dropdown-item"><!----> <a href="/Js_bugs/" class="nav-link">Js问题整理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">vue-router</a></li><li class="dropdown-item"><!----> <a href="/vuex/" class="nav-link">vuex</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wx/minipro/1.拿什么写小程序.html" class="nav-link">小程序</a></li><li class="dropdown-item"><!----> <a href="/wx/minipub/" class="nav-link">公众号</a></li><li class="dropdown-item"><!----> <a href="/wx/wxgm/" class="nav-link">小游戏</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Js</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Js_basis/" class="nav-link">Js基础</a></li><li class="dropdown-item"><!----> <a href="/Js_Advance/" class="nav-link">Js高级</a></li><li class="dropdown-item"><!----> <a href="/Js_bugs/" class="nav-link">Js问题整理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">vue-router</a></li><li class="dropdown-item"><!----> <a href="/vuex/" class="nav-link">vuex</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wx/minipro/1.拿什么写小程序.html" class="nav-link">小程序</a></li><li class="dropdown-item"><!----> <a href="/wx/minipub/" class="nav-link">公众号</a></li><li class="dropdown-item"><!----> <a href="/wx/wxgm/" class="nav-link">小游戏</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Js</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue-Router</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vuex</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>小程序</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/wx/minipro/4.深入理解小程序.html" class="sidebar-link">0.一小时小程序概述</a></li><li><a href="/wx/minipro/1.拿什么写小程序.html" class="active sidebar-link">1.搭建页面结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#_1-小程序配置项见官网" class="sidebar-link">1.小程序配置项见官网</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#_2-微信小程序结构" class="sidebar-link">2 微信小程序结构</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#什么是wxml" class="sidebar-link">什么是wxml</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#页面布局" class="sidebar-link">页面布局</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#wxml结构拼接" class="sidebar-link">wxml结构拼接</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#标签特殊属性" class="sidebar-link">标签特殊属性</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#视图标签" class="sidebar-link">视图标签</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#内容标签" class="sidebar-link">内容标签</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#表单标签" class="sidebar-link">表单标签</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#日期选择器" class="sidebar-link">日期选择器</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#导航跳转标签" class="sidebar-link">导航跳转标签</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#音频-wx-createinneraudiocontext" class="sidebar-link">音频 wx.createInnerAudioContext()</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#视频-wx-createvideocontext" class="sidebar-link">视频 wx.createVideoContext()</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#相机-wx-createcameracontext" class="sidebar-link">相机 wx.createCameraContext()</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#图片容器" class="sidebar-link">图片容器</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#直播功能" class="sidebar-link">直播功能</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#地图-wx-createmapcontext" class="sidebar-link">地图 wx.createMapContext({})</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#画布-wx-createcanvascontex-canvas标签id" class="sidebar-link">画布 wx.createCanvasContex(canvas标签id)</a></li></ul></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#_3-微信小程序js语法" class="sidebar-link">3.微信小程序Js语法</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#微信js语法" class="sidebar-link">微信JS语法</a></li></ul></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#_4-小程序模板语法-类比vue" class="sidebar-link">4.小程序模板语法-类比Vue</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#模板" class="sidebar-link">模板</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#模板数据绑定" class="sidebar-link">模板数据绑定</a></li><li class="sidebar-sub-header"><a href="/wx/minipro/1.拿什么写小程序.html#指令" class="sidebar-link">指令</a></li></ul></li></ul></li><li><a href="/wx/minipro/2.怎么写功能.html" class="sidebar-link">2.怎么写功能?</a></li><li><a href="/wx/minipro/3.项目叨逼叨.html" class="sidebar-link">项目叨逼叨</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_1-搭建页面结构"><a href="#_1-搭建页面结构" aria-hidden="true" class="header-anchor">#</a> 1.搭建页面结构</h1> <h2 id="_1-小程序配置项见官网"><a href="#_1-小程序配置项见官网" aria-hidden="true" class="header-anchor">#</a> 1.小程序配置项见官网</h2> <ul><li>'IDE,申请,开启项目的教程太多了'</li></ul> <h2 id="_2-微信小程序结构"><a href="#_2-微信小程序结构" aria-hidden="true" class="header-anchor">#</a> 2 微信小程序结构</h2> <ul><li>'和初学前端时一样, 从表象输入是最直接的学习方式, 先来熟悉下, 小程序中的基本结构是由什么组成的吧'</li></ul> <h3 id="什么是wxml"><a href="#什么是wxml" aria-hidden="true" class="header-anchor">#</a> 什么是wxml</h3> <ul><li>小程序中的页面,类似html.但是比html页面的标签少很多</li></ul> <h3 id="页面布局"><a href="#页面布局" aria-hidden="true" class="header-anchor">#</a> 页面布局</h3> <h4 id="推荐使用flex布局"><a href="#推荐使用flex布局" aria-hidden="true" class="header-anchor">#</a> 推荐使用flex布局</h4> <div class="language-css line-numbers-mode"><pre class="language-css"><code>
	<span class="token selector">父容器设置
	.container</span><span class="token punctuation">{</span>
		
		<span class="token property">display</span><span class="token punctuation">:</span>flex<span class="token punctuation">;</span>
		
		主轴方向
		<span class="token property">flex-direction</span><span class="token punctuation">:</span>row默认 | colum <span class="token punctuation">;</span>
		
		主轴内容换行
		<span class="token property">flex-wrap</span><span class="token punctuation">:</span> nowrap默认 | wrap <span class="token punctuation">;</span>
		
		主轴内容对齐方式
		<span class="token property">justfy-content</span><span class="token punctuation">:</span>flex-start默认 | center用的多 | space-between | space-around | space-evenly <span class="token punctuation">;</span>
		
		内容垂直展示方式
		<span class="token property">align-items</span><span class="token punctuation">:</span> strech默认撑高 | center垂直居中用的多 | baseline | flex-end <span class="token punctuation">;</span>
		
		交叉轴方向上对齐方式
		<span class="token property">align-content</span><span class="token punctuation">:</span> stretch（默认值） | flex-start | center | flex-end | space-between |space-around | space-evenly<span class="token punctuation">;</span>
		
	<span class="token punctuation">}</span>
	
	<span class="token selector">子元素设置
	.item</span><span class="token punctuation">{</span>
		
		元素宽度占比
		<span class="token property">flex</span><span class="token punctuation">:</span> 非负整数<span class="token punctuation">;</span>
		
		元素在主轴靠前排班<span class="token punctuation">,</span> 值越小越靠前
		<span class="token property">order</span><span class="token punctuation">:</span> 0默认 | 整数<span class="token punctuation">;</span>
		
		元素剩余空间均摊比
		<span class="token property">flex-grow</span><span class="token punctuation">:</span> 0默认 | 非负整数<span class="token punctuation">;</span>
		
		元素溢出压缩比<span class="token punctuation">(</span>没啥用<span class="token punctuation">)</span>
		<span class="token property">flex-shrink</span><span class="token punctuation">:</span> 1默认 | 非负整数<span class="token punctuation">;</span>
		
		元素自身在交叉轴位置
		<span class="token property">align-self</span><span class="token punctuation">:</span> auto（默认值） | flex-start | center | flex-end | baseline |stretch
	<span class="token punctuation">}</span>


</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br></div></div><h3 id="wxml结构拼接"><a href="#wxml结构拼接" aria-hidden="true" class="header-anchor">#</a> wxml结构拼接</h3> <h4 id="import"><a href="#import" aria-hidden="true" class="header-anchor">#</a> import</h4> <ul><li>import可以引入另外一个wxml文件中的所有模板 </li> <li>在引入者wxml中使用 进行展示</li> <li><strong>特点</strong>: 不能递归,  B.wxml 中import A.wxml , C.wxml 中import B.wxml ,此时C中只能使用B的模板,获取不到A的模板</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>improt</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>A.wxml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h4 id="include"><a href="#include" aria-hidden="true" class="header-anchor">#</a> include</h4> <ul><li>include可以将一个页面的所有内容(根标签除外),进行引入</li> <li>实现结构拼接需要使用include引入</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>//home.wxml中
// 头
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>header.wxml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>

<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>home_body<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span> 
	内容
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>

// 尾
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>include</span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>footer.wxml<span class="token punctuation">&quot;</span></span> <span class="token punctuation">/&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br></div></div><h3 id="标签特殊属性"><a href="#标签特殊属性" aria-hidden="true" class="header-anchor">#</a> 标签特殊属性</h3> <ul><li>hidden 控制显示隐藏</li></ul> <h4 id="button"><a href="#button" aria-hidden="true" class="header-anchor">#</a> button</h4> <ul><li>hover-class=&quot;颜色样式&quot; 触摸阴影</li> <li>loading=&quot;&quot;   加载效果</li></ul> <h3 id="视图标签"><a href="#视图标签" aria-hidden="true" class="header-anchor">#</a> 视图标签</h3> <pre><code>- view 基本视图容器:  相当于div
- scoll-view 滚动视图容器: 设置固定高度,内容超出高度时有局部滚动效果
	+ 类似于html中父容器设置over-scroll:auto;属性
- movable-area 拖拽视图容器: 	限制拖拽区域.必须包含movable-view
	+ movable-view 内部嵌套:  被拖拽的元素容器. 必须包含在movable-area中.
		1. 必须嵌套使用: movable-area中放movable-view
		2. movable-area的宽高 &gt; movable-view的宽高. view只能在area范围内移动
		3. movable-area的宽高 &lt; movable-view的宽高. view在移动是一定要涵盖area
- swiper 轮播图容器: 
	+ swiper-item 内部嵌套 轮播图配置项见[官网](https://developers.weixin.qq.com/miniprogram/dev/component/swiper.html)
</code></pre> <h3 id="内容标签"><a href="#内容标签" aria-hidden="true" class="header-anchor">#</a> 内容标签</h3> <pre><code>- 系统图标: &lt;icon/&gt;
	+ type: 标签类型
	+ size: 图标尺寸
	+ color: 图标颜色
- progress 进度条 [配置](https://developers.weixin.qq.com/miniprogram/dev/component/progress.html)
- rich-text 富文本
- text 文本标签,唯一可以长按复制内容的标签
</code></pre> <h3 id="表单标签"><a href="#表单标签" aria-hidden="true" class="header-anchor">#</a> 表单标签</h3> <pre><code>- button
- checkbox-group 复选框组
- radio-group 单选框组
	* bindchange函数: 内部checkbox选项修改时触发
- form
	* 当点击 form 表单中 form-type 为 submit 的 button 组件时，会将表单组件中的 value 值进行提交，需要在表单组件中加上 name 来作为 key
- picker 从底部弹起的滚动选择器。有日期,省市区等
- picker-view 嵌入页面的滚动选择器。其中只可放置 picker-view-column组件
- input 文本框,有id类型
- slider 滑块选择器
- switch 开关选择器
- textarea 多行输入框
</code></pre> <h3 id="日期选择器"><a href="#日期选择器" aria-hidden="true" class="header-anchor">#</a> 日期选择器</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{year}}年{{month}}月{{day}}日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
  
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker-view</span> <span class="token attr-name">indicator-</span><span class="token style-attr language-css"><span class="token attr-name"><span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">height</span><span class="token punctuation">:</span> 50px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 100%<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 300px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span> <span class="token attr-name">value</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{value}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">bindchange</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bindChange<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker-view-column</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{years}}<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">line-height</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}年<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker-view-column</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker-view-column</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{months}}<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">line-height</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}月<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker-view-column</span><span class="token punctuation">&gt;</span></span>
	
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>picker-view-column</span><span class="token punctuation">&gt;</span></span>
	  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{days}}<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name"> <span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">line-height</span><span class="token punctuation">:</span> 50px</span><span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>{{item}}日<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker-view-column</span><span class="token punctuation">&gt;</span></span>
	
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>picker-view</span><span class="token punctuation">&gt;</span></span>
  
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> date <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Date</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token keyword">const</span> years <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> months <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
<span class="token keyword">const</span> days <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1990</span><span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  years<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">12</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  months<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">1</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;=</span> <span class="token number">31</span><span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  days<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	years<span class="token punctuation">:</span> years<span class="token punctuation">,</span>
	year<span class="token punctuation">:</span> date<span class="token punctuation">.</span><span class="token function">getFullYear</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
	months<span class="token punctuation">:</span> months<span class="token punctuation">,</span>
	month<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	days<span class="token punctuation">:</span> days<span class="token punctuation">,</span>
	day<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
	value<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token number">9999</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">bindChange</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	<span class="token keyword">const</span> val <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
	<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	  year<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>years<span class="token punctuation">[</span>val<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	  month<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>months<span class="token punctuation">[</span>val<span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	  day<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>data<span class="token punctuation">.</span>days<span class="token punctuation">[</span>val<span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br></div></div><h3 id="导航跳转标签"><a href="#导航跳转标签" aria-hidden="true" class="header-anchor">#</a> 导航跳转标签</h3> <ul><li>navigator 页面跳转标签 <a href="https://developers.weixin.qq.com/miniprogram/dev/component/navigator.html" target="_blank" rel="noopener noreferrer">opentype 一定要注意<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li></ul> <h3 id="音频-wx-createinneraudiocontext"><a href="#音频-wx-createinneraudiocontext" aria-hidden="true" class="header-anchor">#</a> 音频 wx.createInnerAudioContext()</h3> <pre><code>- wx.createInnerAudioContext() 创建实例操作
+  摄像头常用操作
 +  [常用方法](https://developers.weixin.qq.com/miniprogram/dev/api/media/audio/InnerAudioContext.html)
</code></pre> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建innerAudioContext实例</span>
<span class="token keyword">const</span> innerAudioContext <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createInnerAudioContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token comment">// 设置基本属性</span>
innerAudioContext<span class="token punctuation">.</span>autoplay <span class="token operator">=</span> <span class="token boolean">true</span> <span class="token comment">// 自动播放</span>
innerAudioContext<span class="token punctuation">.</span>src <span class="token operator">=</span> <span class="token string">'???'</span>	<span class="token comment">// 文件地址</span>
innerAudioContext<span class="token punctuation">.</span><span class="token function">onPlay</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'开始播放'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
innerAudioContext<span class="token punctuation">.</span><span class="token function">onError</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token operator">=&gt;</span> <span class="token punctuation">{</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>res<span class="token punctuation">.</span>errCode<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

<span class="token comment">//1 可通过 wx.createInnerAudioContext 接口获取实例</span>
<span class="token comment">//2 属性</span>
<span class="token comment">/**
 * src 音频资源的地址，用于直接播放
 * 
 * startTime 开始播放的位置（单位：s），默认为 0
 * 
 * autoplay 是否自动开始播放，默认为 false
 * 
 * loop 是否循环播放，默认为 false
 * 
 * volume 音量
 * 
 * duration 
 * 当前音频的长度（单位 s）。只有在当前有合法的 src 时返回（只读）
 * currentTime
 * 当前音频的播放位置（单位 s）。只有在当前有合法的 src 时返回，时间保留小数点后 6 位（只读）
 * paused
 * 当前是是否暂停或停止状态（只读）
 * buffered
 * 音频缓冲的时间点，仅保证当前播放时间点到此时间点内容已缓冲（只读）
 * */</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="视频-wx-createvideocontext"><a href="#视频-wx-createvideocontext" aria-hidden="true" class="header-anchor">#</a> 视频 wx.createVideoContext()</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>section tc<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>video</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>myVideo<span class="token punctuation">&quot;</span></span> <span class="token attr-name">src</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>http://wxsnsdy.tc.qq.com/105/20210/snsdyvideodownload?filekey=30280201010421301f0201690402534804102ca905ce620b1241b726bc41dcff44e00204012882540400&amp;bizid=1023&amp;hy=SH&amp;fileparam=302c020101042530230204136ffd93020457e3c4ff02024ef202031e8d7f02030f42400204045a320a0201000400<span class="token punctuation">&quot;</span></span> <span class="token attr-name">danmu-list</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{danmuList}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name">enable-danmu</span> <span class="token attr-name">danmu-btn</span> <span class="token attr-name">controls</span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>video</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>btn-area<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bindButtonTap<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>获取视频<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>input</span> <span class="token attr-name">bindblur</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bindInputBlur<span class="token punctuation">&quot;</span></span><span class="token punctuation">/&gt;</span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>bindSendDanmu<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>发送弹幕<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
  <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 弹幕随机颜色字体</span>
<span class="token keyword">function</span> <span class="token function">getRandomColor</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> rgb <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> <span class="token number">3</span><span class="token punctuation">;</span> <span class="token operator">++</span>i<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> color <span class="token operator">=</span> Math<span class="token punctuation">.</span><span class="token function">floor</span><span class="token punctuation">(</span>Math<span class="token punctuation">.</span><span class="token function">random</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token number">256</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token number">16</span><span class="token punctuation">)</span>
    color <span class="token operator">=</span> color<span class="token punctuation">.</span>length <span class="token operator">==</span> <span class="token number">1</span> <span class="token operator">?</span> <span class="token string">'0'</span> <span class="token operator">+</span> color <span class="token punctuation">:</span> color
    rgb<span class="token punctuation">.</span><span class="token function">push</span><span class="token punctuation">(</span>color<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
  <span class="token keyword">return</span> <span class="token string">'#'</span> <span class="token operator">+</span> rgb<span class="token punctuation">.</span><span class="token function">join</span><span class="token punctuation">(</span><span class="token string">''</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">onReady</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
	  <span class="token comment">// 创建视频实例</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>videoContext <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createVideoContext</span><span class="token punctuation">(</span><span class="token string">'myVideo'</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  inputValue<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
    src<span class="token punctuation">:</span> <span class="token string">''</span><span class="token punctuation">,</span>
    danmuList<span class="token punctuation">:</span> <span class="token punctuation">[</span>
      <span class="token punctuation">{</span>
        text<span class="token punctuation">:</span> <span class="token string">'第 1s 出现的弹幕'</span><span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> <span class="token string">'#ff0000'</span><span class="token punctuation">,</span>
        time<span class="token punctuation">:</span> <span class="token number">1</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      <span class="token punctuation">{</span>
        text<span class="token punctuation">:</span> <span class="token string">'第 3s 出现的弹幕'</span><span class="token punctuation">,</span>
        color<span class="token punctuation">:</span> <span class="token string">'#ff00ff'</span><span class="token punctuation">,</span>
        time<span class="token punctuation">:</span> <span class="token number">3</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">bindInputBlur</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>inputValue <span class="token operator">=</span> e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>value
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">bindButtonTap</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">var</span> that <span class="token operator">=</span> <span class="token keyword">this</span>
    wx<span class="token punctuation">.</span><span class="token function">chooseVideo</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      sourceType<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'album'</span><span class="token punctuation">,</span> <span class="token string">'camera'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      maxDuration<span class="token punctuation">:</span> <span class="token number">60</span><span class="token punctuation">,</span>
      camera<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token string">'front'</span><span class="token punctuation">,</span><span class="token string">'back'</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      <span class="token function-variable function">success</span><span class="token punctuation">:</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        that<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
          src<span class="token punctuation">:</span> res<span class="token punctuation">.</span>tempFilePath
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
      <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">bindSendDanmu</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">this</span><span class="token punctuation">.</span>videoContext<span class="token punctuation">.</span><span class="token function">sendDanmu</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
      text<span class="token punctuation">:</span> <span class="token keyword">this</span><span class="token punctuation">.</span>inputValue<span class="token punctuation">,</span>
      color<span class="token punctuation">:</span> <span class="token function">getRandomColor</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br><span class="line-number">49</span><br><span class="line-number">50</span><br><span class="line-number">51</span><br><span class="line-number">52</span><br><span class="line-number">53</span><br><span class="line-number">54</span><br></div></div><h3 id="相机-wx-createcameracontext"><a href="#相机-wx-createcameracontext" aria-hidden="true" class="header-anchor">#</a> 相机 wx.createCameraContext()</h3> <pre><code>- 拍照录视频相关[方法](https://developers.weixin.qq.com/miniprogram/dev/api/media/camera/CameraContext.html)
</code></pre> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>camera</span>  
	<span class="token attr-name">后置摄像头</span> <span class="token attr-name">device-position</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>back<span class="token punctuation">&quot;</span></span> 
	<span class="token attr-name">闪光灯</span> <span class="token attr-name">flash</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>off<span class="token punctuation">&quot;</span></span><span class="token style-attr language-css"><span class="token attr-name">
	<span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span>100%<span class="token punctuation">;</span><span class="token property">height</span><span class="token punctuation">:</span>300rpx<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span>
<span class="token punctuation">/&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>takePhoto<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>拍照<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>button</span> <span class="token attr-name">bindtap</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>tokenMovie<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>录视频<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>button</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// 创建相机实例</span>
<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
	<span class="token comment">// 照相</span>
	<span class="token function">takePhoto</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">let</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCameraContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		ctx<span class="token punctuation">.</span><span class="token function">takePhoto</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			quality<span class="token punctuation">:</span> <span class="token string">'high'</span><span class="token punctuation">,</span><span class="token comment">//高质量</span>
			<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				<span class="token keyword">this</span><span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					imgSrc<span class="token punctuation">:</span>res<span class="token punctuation">.</span>tempImagePath
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">error</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span><span class="token punctuation">,</span>
	
	<span class="token comment">// 录像</span>
	<span class="token function">tokenMovie</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">let</span> _this <span class="token operator">=</span> <span class="token keyword">this</span>
		<span class="token keyword">let</span> ctx <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCameraContext</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
		<span class="token comment">// 开始拍摄调用</span>
		ctx<span class="token punctuation">.</span><span class="token function">startRecord</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
			<span class="token function">timeoutCallback</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">//超过30s或页面 onHide 时会结束录像,自动触发</span>
				_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					imgSrc<span class="token punctuation">:</span>res<span class="token punctuation">.</span>tempThumbPath<span class="token punctuation">,</span><span class="token comment">//封面</span>
					videoSrc<span class="token punctuation">:</span>res<span class="token punctuation">.</span>tempVideoPath<span class="token comment">//录像</span>
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span><span class="token punctuation">,</span>
			<span class="token function">success</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
				_this<span class="token punctuation">.</span><span class="token function">setData</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
					imgSrc<span class="token punctuation">:</span>res<span class="token punctuation">.</span>tempThumbPath<span class="token punctuation">,</span>
					videoPath<span class="token punctuation">:</span>res<span class="token punctuation">.</span>tempVideoPath
				<span class="token punctuation">}</span><span class="token punctuation">)</span>
			<span class="token punctuation">}</span>
		<span class="token punctuation">}</span><span class="token punctuation">)</span>
	<span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><h3 id="图片容器"><a href="#图片容器" aria-hidden="true" class="header-anchor">#</a> 图片容器</h3> <pre><code>- 图片。支持JPG、PNG、SVG格式，2.3.0 起支持云文件ID。
- widthFix	缩放模式，宽度不变，高度自动变化，保持原图宽高比不变
</code></pre> <ul><li>map是原生组件其节点树非常简单，基本上可以认为只有一个div元素</li> <li>原生组件的层级会比所有在WebView层渲染的普通组件要高</li> <li>代码在渲染层开始运行时，会经历以下几个步聚：
<ol><li>组件被创建，包括组件属性会依次赋值。</li> <li>组件被插入到DOM树里，浏览器内核会立即计算布局，此时我们可以读取出组件相对页面的位置（x, y坐标）、宽高。</li> <li>组件通知客户端，客户端在相同的位置上，根据宽高插入一块原生区域，之后客户端就在这块区域渲染界面</li> <li>当位置或宽高发生变化时，组件会通知客户端做相应的调整</li></ol></li></ul> <h3 id="直播功能"><a href="#直播功能" aria-hidden="true" class="header-anchor">#</a> 直播功能</h3> <pre><code>- live-player 实时音视频播放, wx.createLivePlayerContext, [详情见](https://developers.weixin.qq.com/miniprogram/dev/component/live-player.html)
- live-pusher 实时音视频录制, 需要用户授权 scope.camera、scope.record
</code></pre> <h3 id="地图-wx-createmapcontext"><a href="#地图-wx-createmapcontext" aria-hidden="true" class="header-anchor">#</a> 地图 wx.createMapContext({})</h3> <ul><li>原生组件都会提供“context”，用于直接操作组件</li> <li><a href="https://lbs.qq.com/product/miniapp/guide/" target="_blank" rel="noopener noreferrer">个性地图设置指南<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li><a href="https://developers.weixin.qq.com/miniprogram/dev/component/map.html" target="_blank" rel="noopener noreferrer">常用地图配置<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></li> <li>IDE中看不了效果</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token comment">&lt;!-- map.wxml --&gt;</span>
&lt;map 
	id=&quot;map&quot; 
	longitude=&quot;113.324520&quot; 	// 经度
	latitude=&quot;23.099994&quot; 	// 纬度
	scale=&quot;14&quot; 				// 缩放级别，取值范围为3-20
	
	controls=&quot;{{controls}}&quot; // 控件
	bindcontroltap=&quot;controltap&quot; // 点击控件时触发
	
	markers=&quot;{{markers}}&quot; 		// 标记点
	bindmarkertap=&quot;markertap&quot; 	// 点击标记点时触发
	
	polyline=&quot;{{polyline}}&quot; 	// 路线
	bindregionchange=&quot;regionchange&quot;  // 视野发生变化时触发
	show-location 	// 显示带有方向的当前定位点
	style=&quot;width: 100%; height: 300px;&quot;

&gt;<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>map</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  data<span class="token punctuation">:</span> <span class="token punctuation">{</span>
	<span class="token comment">// marker 标记点用于在地图上显示标记的位置</span>
    markers<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      iconPath<span class="token punctuation">:</span> <span class="token string">&quot;/resources/others.png&quot;</span><span class="token punctuation">,</span>
      id<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
      latitude<span class="token punctuation">:</span> <span class="token number">23.099994</span><span class="token punctuation">,</span>
      longitude<span class="token punctuation">:</span> <span class="token number">113.324520</span><span class="token punctuation">,</span>
      width<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
      height<span class="token punctuation">:</span> <span class="token number">50</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
	
	<span class="token comment">// 指定一系列坐标点，从数组第一项连线至最后一项</span>
    polyline<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      points<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
        longitude<span class="token punctuation">:</span> <span class="token number">113.3245211</span><span class="token punctuation">,</span>
        latitude<span class="token punctuation">:</span> <span class="token number">23.10229</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span> <span class="token punctuation">{</span>
        longitude<span class="token punctuation">:</span> <span class="token number">113.324520</span><span class="token punctuation">,</span>
        latitude<span class="token punctuation">:</span> <span class="token number">23.21229</span>
      <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
      color<span class="token punctuation">:</span><span class="token string">&quot;#FF0000DD&quot;</span><span class="token punctuation">,</span>
      width<span class="token punctuation">:</span> <span class="token number">2</span><span class="token punctuation">,</span>
      dottedLine<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span><span class="token punctuation">,</span>
    controls<span class="token punctuation">:</span> <span class="token punctuation">[</span><span class="token punctuation">{</span>
      id<span class="token punctuation">:</span> <span class="token number">1</span><span class="token punctuation">,</span>
      iconPath<span class="token punctuation">:</span> <span class="token string">'/resources/location.png'</span><span class="token punctuation">,</span>
      position<span class="token punctuation">:</span> <span class="token punctuation">{</span>
        left<span class="token punctuation">:</span> <span class="token number">0</span><span class="token punctuation">,</span>
        top<span class="token punctuation">:</span> <span class="token number">300</span> <span class="token operator">-</span> <span class="token number">50</span><span class="token punctuation">,</span>
        width<span class="token punctuation">:</span> <span class="token number">50</span><span class="token punctuation">,</span>
        height<span class="token punctuation">:</span> <span class="token number">50</span>
      <span class="token punctuation">}</span><span class="token punctuation">,</span>
      clickable<span class="token punctuation">:</span> <span class="token boolean">true</span>
    <span class="token punctuation">}</span><span class="token punctuation">]</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  
  <span class="token function">regionchange</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>type<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">markertap</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>markerId<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function">controltap</span><span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>controlId<span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br><span class="line-number">40</span><br><span class="line-number">41</span><br><span class="line-number">42</span><br><span class="line-number">43</span><br><span class="line-number">44</span><br><span class="line-number">45</span><br><span class="line-number">46</span><br><span class="line-number">47</span><br><span class="line-number">48</span><br></div></div><h3 id="画布-wx-createcanvascontex-canvas标签id"><a href="#画布-wx-createcanvascontex-canvas标签id" aria-hidden="true" class="header-anchor">#</a> 画布 wx.createCanvasContex(canvas标签id)</h3> <div class="language-html line-numbers-mode"><pre class="language-html"><code><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>canvas</span><span class="token style-attr language-css"><span class="token attr-name"> 
	<span class="token attr-name">style</span></span><span class="token punctuation">=&quot;</span><span class="token attr-value"><span class="token property">width</span><span class="token punctuation">:</span> 400px<span class="token punctuation">;</span> <span class="token property">height</span><span class="token punctuation">:</span> 500px<span class="token punctuation">;</span></span><span class="token punctuation">&quot;</span></span> 
	<span class="token attr-name">canvas-id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>firstCanvas<span class="token punctuation">&quot;</span></span> 
	<span class="token attr-name">binderror</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>canvasIdErrorCallback<span class="token punctuation">&quot;</span></span>
	<span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>canvas</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
  <span class="token function-variable function">canvasIdErrorCallback</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    console<span class="token punctuation">.</span><span class="token function">error</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>detail<span class="token punctuation">.</span>errMsg<span class="token punctuation">)</span>
  <span class="token punctuation">}</span><span class="token punctuation">,</span>
  <span class="token function-variable function">onReady</span><span class="token punctuation">:</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token parameter">e</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 使用 wx.createContext 获取绘图上下文 context</span>
    <span class="token keyword">var</span> context <span class="token operator">=</span> wx<span class="token punctuation">.</span><span class="token function">createCanvasContext</span><span class="token punctuation">(</span><span class="token string">'firstCanvas'</span><span class="token punctuation">)</span>

    context<span class="token punctuation">.</span><span class="token function">setStrokeStyle</span><span class="token punctuation">(</span><span class="token string">&quot;#00ff00&quot;</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">setLineWidth</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">rect</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">,</span> <span class="token number">200</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">setStrokeStyle</span><span class="token punctuation">(</span><span class="token string">&quot;#ff0000&quot;</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">setLineWidth</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">160</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">60</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">140</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">100</span><span class="token punctuation">,</span> <span class="token number">40</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">85</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">moveTo</span><span class="token punctuation">(</span><span class="token number">125</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">arc</span><span class="token punctuation">(</span><span class="token number">120</span><span class="token punctuation">,</span> <span class="token number">80</span><span class="token punctuation">,</span> <span class="token number">5</span><span class="token punctuation">,</span> <span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">2</span> <span class="token operator">*</span> Math<span class="token punctuation">.</span><span class="token constant">PI</span><span class="token punctuation">,</span> <span class="token boolean">true</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">stroke</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    context<span class="token punctuation">.</span><span class="token function">draw</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><h2 id="_3-微信小程序js语法"><a href="#_3-微信小程序js语法" aria-hidden="true" class="header-anchor">#</a> 3.微信小程序Js语法</h2> <h3 id="微信js语法"><a href="#微信js语法" aria-hidden="true" class="header-anchor">#</a> 微信JS语法</h3> <ul><li>ES6兼容问题: IOS9,10上对ES6兼容有问题,编译器会自动转成ES5</li> <li>模块化: 语法规则与COMMONJS相同
<ul><li>推荐使用modules.exports导出对象方法</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>	<span class="token comment">//a.js中导出</span>
	
	<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token punctuation">{</span>
		<span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	module<span class="token punctuation">.</span>exports <span class="token operator">=</span> a
	
	
	<span class="token comment">//b.js中引入</span>
	<span class="token keyword">let</span> a <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'a.js'</span><span class="token punctuation">)</span>
	a<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	a<span class="token punctuation">.</span><span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><ul><li>作用域: 与Node作用域类似, 每个模块js文件有单独的作用域, 多文件相互引入不会相互影响</li> <li>全局变量: Node中挂载到global对象上, 浏览器挂载到window对象上, 小程序挂载到app.js中globalData属性对象中</li> <li>其余与JS没差别</li></ul> <h2 id="_4-小程序模板语法-类比vue"><a href="#_4-小程序模板语法-类比vue" aria-hidden="true" class="header-anchor">#</a> 4.小程序模板语法-类比Vue</h2> <h3 id="模板"><a href="#模板" aria-hidden="true" class="header-anchor">#</a> 模板</h3> <ul><li>与普通html标签相同,遵循严格闭合. 除(import,include引入wxml标签外)</li></ul> <h3 id="模板数据绑定"><a href="#模板数据绑定" aria-hidden="true" class="header-anchor">#</a> 模板数据绑定</h3> <ul><li>在标签中使用插值表达式'{{}}'</li> <li>在标签内属性使用attr=&quot;{{}}&quot;</li> <li>模板中允许使用模板语法: 要求尽可能简单操作, 不像Vue允许复杂操作. 允许三元表达式,简答运算</li> <li>大小写敏感</li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>index.wxml

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{name}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span><span class="token punctuation">&gt;</span></span>{{age}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
		
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">data-id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{tempId}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><div class="language-js line-numbers-mode"><pre class="language-js"><code>index<span class="token punctuation">.</span>js
	<span class="token function">Page</span><span class="token punctuation">(</span><span class="token punctuation">{</span>
		data<span class="token punctuation">:</span><span class="token punctuation">{</span>
			name<span class="token punctuation">:</span><span class="token string">'1'</span>
			<span class="token punctuation">,</span>age<span class="token punctuation">:</span><span class="token number">2</span>
			<span class="token punctuation">,</span>tempId<span class="token punctuation">:</span><span class="token number">0</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span><span class="token punctuation">)</span>
	
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="指令"><a href="#指令" aria-hidden="true" class="header-anchor">#</a> 指令</h3> <h4 id="循环"><a href="#循环" aria-hidden="true" class="header-anchor">#</a> 循环</h4> <ul><li>wx:for=&quot;&quot; wx:for-index=&quot;索引index&quot; wx:for-item=&quot;索引对应项item&quot;</li> <li>wx:key 提供唯一标识,值:
<ol><li>字符串: 使用item中的唯一属性值</li> <li>this: 要求item必须是唯一字符串</li></ol></li></ul> <div class="language-html line-numbers-mode"><pre class="language-html"><code>index.wxml
数据格式: arr:[1,2,3,4]

	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>block</span> <span class="token attr-name"><span class="token namespace">wx:</span>for</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{arr}}<span class="token punctuation">&quot;</span></span> <span class="token attr-name"><span class="token namespace">wx:</span>for-index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>ind<span class="token punctuation">&quot;</span></span>  <span class="token attr-name"><span class="token namespace">wx:</span>for-item</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>item<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>view</span><span class="token punctuation">&gt;</span></span>{{item}}<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>view</span><span class="token punctuation">&gt;</span></span>
		<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>text</span> <span class="token attr-name">data-index</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">&quot;</span>{{ind}}<span class="token punctuation">&quot;</span></span><span class="token punctuation">&gt;</span></span>删除<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>text</span><span class="token punctuation">&gt;</span></span>
	<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>block</span><span class="token punctuation">&gt;</span></span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>Vue中循环 v-for=&quot;(item,index) in arr&quot; :key=&quot;item.id&quot;</li></ul> <h4 id="分支"><a href="#分支" aria-hidden="true" class="header-anchor">#</a> 分支</h4> <ul><li>wx:if=&quot;&quot; 可以控制显示隐藏组件</li> <li>wx:elif=&quot;&quot; 配合wx:if使用</li> <li>wx:else	配合wx:if使用</li> <li>Vue中分支 v-if=&quot;&quot; v-else</li></ul></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/wx/minipro/4.深入理解小程序.html" class="prev">
          0.一小时小程序概述
        </a></span> <span class="next"><a href="/wx/minipro/2.怎么写功能.html">
          2.怎么写功能?
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.314208ec.js" defer></script><script src="/assets/js/2.3dbe4ac7.js" defer></script><script src="/assets/js/47.e9efc34d.js" defer></script>
  </body>
</html>
