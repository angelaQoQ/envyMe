<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>2.ES6 | 用心</title>
    <meta name="description" content="活着">
    <link rel="icon" href="./press_avatar.png">
    
    <link rel="preload" href="/assets/css/0.styles.18be6571.css" as="style"><link rel="preload" href="/assets/js/app.314208ec.js" as="script"><link rel="preload" href="/assets/js/2.3dbe4ac7.js" as="script"><link rel="preload" href="/assets/js/12.845c0d45.js" as="script"><link rel="prefetch" href="/assets/js/10.09fa1052.js"><link rel="prefetch" href="/assets/js/11.d4f3cc01.js"><link rel="prefetch" href="/assets/js/13.3eea8c07.js"><link rel="prefetch" href="/assets/js/14.680482c3.js"><link rel="prefetch" href="/assets/js/15.0e1a4de8.js"><link rel="prefetch" href="/assets/js/16.c2b57ca6.js"><link rel="prefetch" href="/assets/js/17.f6d53abe.js"><link rel="prefetch" href="/assets/js/18.32518103.js"><link rel="prefetch" href="/assets/js/19.27feb172.js"><link rel="prefetch" href="/assets/js/20.06be6d6e.js"><link rel="prefetch" href="/assets/js/21.9e865467.js"><link rel="prefetch" href="/assets/js/22.630cda10.js"><link rel="prefetch" href="/assets/js/23.a9756b8d.js"><link rel="prefetch" href="/assets/js/24.eb4d423b.js"><link rel="prefetch" href="/assets/js/25.ab6e4013.js"><link rel="prefetch" href="/assets/js/26.6ef779c7.js"><link rel="prefetch" href="/assets/js/27.d15ed41b.js"><link rel="prefetch" href="/assets/js/28.086a9083.js"><link rel="prefetch" href="/assets/js/29.31e7789f.js"><link rel="prefetch" href="/assets/js/3.788b749c.js"><link rel="prefetch" href="/assets/js/30.78afe3a4.js"><link rel="prefetch" href="/assets/js/31.6fa1a3fc.js"><link rel="prefetch" href="/assets/js/32.31b3c7c5.js"><link rel="prefetch" href="/assets/js/33.3bd402a1.js"><link rel="prefetch" href="/assets/js/34.26464d62.js"><link rel="prefetch" href="/assets/js/35.4cd98e92.js"><link rel="prefetch" href="/assets/js/36.23ac981b.js"><link rel="prefetch" href="/assets/js/37.0b28d024.js"><link rel="prefetch" href="/assets/js/38.1fe985a9.js"><link rel="prefetch" href="/assets/js/39.6822d10c.js"><link rel="prefetch" href="/assets/js/4.14f39196.js"><link rel="prefetch" href="/assets/js/40.0ed7188a.js"><link rel="prefetch" href="/assets/js/41.6f24726d.js"><link rel="prefetch" href="/assets/js/42.54e402eb.js"><link rel="prefetch" href="/assets/js/43.54835e7c.js"><link rel="prefetch" href="/assets/js/44.df4c1b7e.js"><link rel="prefetch" href="/assets/js/45.0873fde0.js"><link rel="prefetch" href="/assets/js/46.4796fd27.js"><link rel="prefetch" href="/assets/js/47.e9efc34d.js"><link rel="prefetch" href="/assets/js/48.6a329478.js"><link rel="prefetch" href="/assets/js/49.173f63c6.js"><link rel="prefetch" href="/assets/js/5.38464c3f.js"><link rel="prefetch" href="/assets/js/50.864c3c6f.js"><link rel="prefetch" href="/assets/js/51.6a00893c.js"><link rel="prefetch" href="/assets/js/52.48b20bcd.js"><link rel="prefetch" href="/assets/js/6.e83a0ec3.js"><link rel="prefetch" href="/assets/js/7.1bd9d7d8.js"><link rel="prefetch" href="/assets/js/8.84adaaaa.js"><link rel="prefetch" href="/assets/js/9.0aada2c5.js">
    <link rel="stylesheet" href="/assets/css/0.styles.18be6571.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/" class="home-link router-link-active"><!----> <span class="site-name">用心</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Js</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Js_basis/" class="nav-link router-link-active">Js基础</a></li><li class="dropdown-item"><!----> <a href="/Js_Advance/" class="nav-link">Js高级</a></li><li class="dropdown-item"><!----> <a href="/Js_bugs/" class="nav-link">Js问题整理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">vue-router</a></li><li class="dropdown-item"><!----> <a href="/vuex/" class="nav-link">vuex</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wx/minipro/1.拿什么写小程序.html" class="nav-link">小程序</a></li><li class="dropdown-item"><!----> <a href="/wx/minipub/" class="nav-link">公众号</a></li><li class="dropdown-item"><!----> <a href="/wx/wxgm/" class="nav-link">小游戏</a></li></ul></div></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Js</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/Js_basis/" class="nav-link router-link-active">Js基础</a></li><li class="dropdown-item"><!----> <a href="/Js_Advance/" class="nav-link">Js高级</a></li><li class="dropdown-item"><!----> <a href="/Js_bugs/" class="nav-link">Js问题整理</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">Vue全家桶</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/vue/" class="nav-link">vue</a></li><li class="dropdown-item"><!----> <a href="/vue-router/" class="nav-link">vue-router</a></li><li class="dropdown-item"><!----> <a href="/vuex/" class="nav-link">vuex</a></li></ul></div></div><div class="nav-item"><div class="dropdown-wrapper"><a class="dropdown-title"><span class="title">小程序</span> <span class="arrow right"></span></a> <ul class="nav-dropdown" style="display:none;"><li class="dropdown-item"><!----> <a href="/wx/minipro/1.拿什么写小程序.html" class="nav-link">小程序</a></li><li class="dropdown-item"><!----> <a href="/wx/minipub/" class="nav-link">公众号</a></li><li class="dropdown-item"><!----> <a href="/wx/wxgm/" class="nav-link">小游戏</a></li></ul></div></div> <!----></nav>  <ul class="sidebar-links"><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Js</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading open"><span>Js基础</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/Js_basis/1.ES5.html" class="sidebar-link">1.ES5</a></li><li><a href="/Js_basis/2.ES6.html" class="active sidebar-link">2.ES6</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-1-变量声明扩展" class="sidebar-link">2.1 变量声明扩展</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-2-解构赋值" class="sidebar-link">2.2 解构赋值</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#数组对象解构赋值" class="sidebar-link">数组对象解构赋值:</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-数组解构" class="sidebar-link">1. 数组解构</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-对象解构" class="sidebar-link">2. 对象解构</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_3-字符串解构" class="sidebar-link">3. 字符串解构</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_4-数字-布尔值解构" class="sidebar-link">4. 数字,布尔值解构</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_5-函数参数解构" class="sidebar-link">5. 函数参数解构</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-3-字符串扩展" class="sidebar-link">2.3 字符串扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-遍历字符串-for-of" class="sidebar-link">1. 遍历字符串 for...of</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-获取内容-at-i" class="sidebar-link">2. 获取内容 at(i)</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_3-检测内容-includes-startswith-endswidth" class="sidebar-link">3. 检测内容 includes() | startsWith() | endsWidth()</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_4-头尾补全-padstart-padend" class="sidebar-link">4. 头尾补全 padStart() | padEnd()</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_5-字符串重复拼接n次的结果返回-repeat-n" class="sidebar-link">5. 字符串重复拼接n次的结果返回 repeat(n)</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_6-模板字符串-变量" class="sidebar-link">6. 模板字符串 &quot; ${变量} &quot;</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-4-正则扩展" class="sidebar-link">2.4 正则扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-regexp实例方法" class="sidebar-link">1.RegExp实例方法</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-regexp静态方法" class="sidebar-link">2.RegExp静态方法</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-5-数组扩展" class="sidebar-link">2.5 数组扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-array-from-伪数组-把伪数组转数组" class="sidebar-link">1. Array.from(伪数组)_把伪数组转数组</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-扩展运算符获取处理伪数组" class="sidebar-link">2. 扩展运算符获取处理伪数组</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_3-array-of-把实参列表数据存入数组" class="sidebar-link">3. Array.of()_把实参列表数据存入数组</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_5-array-prototype-find-callback-按照callback查找项-findindex-callback-查索引" class="sidebar-link">5. Array.prototype.find(callback)_按照callback查找项 || ~.findIndex(callback)_查索引</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_6-array-prototype-fill-arg-用arg填满数组" class="sidebar-link">6. Array.prototype.fill(arg)_用arg填满数组</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_7-array-prototype-entries-keys-values-遍历数组" class="sidebar-link">7. Array.prototype.entries(),keys(),values()_遍历数组</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_8-array-prototype-includes-判断数组是否包含参数" class="sidebar-link">8. Array.prototype.includes()_判断数组是否包含参数</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_9-es5-6-处理数组空位" class="sidebar-link">9. ES5/6 处理数组空位</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-6-函数扩展" class="sidebar-link">2.6 函数扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-参数初始值" class="sidebar-link">1.参数初始值</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2函数length属性" class="sidebar-link">2函数length属性</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_3函数的作用域" class="sidebar-link">3函数的作用域</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_4扩展运算符" class="sidebar-link">4扩展运算符</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_5-name属性" class="sidebar-link">5.name属性</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_6-箭头函数" class="sidebar-link">6.箭头函数</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_7-函数尾调用" class="sidebar-link">7.函数尾调用</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_8-函数尾递归" class="sidebar-link">8.函数尾递归</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_9-蹦床函数" class="sidebar-link">9.蹦床函数</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-7-对象扩展" class="sidebar-link">2.7 对象扩展</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-对象简写" class="sidebar-link">1.对象简写</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-对象全等-object-is-o1-o2" class="sidebar-link">2.对象全等 Object.is(o1,o2)</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_3-对象合并-object-assign-target-o1-o2" class="sidebar-link">3.对象合并 Object.assign(target , o1,o2)</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_4-对象解构" class="sidebar-link">4.对象解构</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-8-symbol类型" class="sidebar-link">2.8 Symbol类型</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#symbol-给对象做属性" class="sidebar-link">Symbol()给对象做属性</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-9-set类型" class="sidebar-link">2.9 Set类型</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-10-map类型" class="sidebar-link">2.10 Map类型</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-11-proxy和reflect" class="sidebar-link">2.11 Proxy和Reflect</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#reflect对象" class="sidebar-link">Reflect对象</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#proxy对象" class="sidebar-link">Proxy对象</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#使用proxy完成观察者" class="sidebar-link">使用Proxy完成观察者</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-12-symbol在单例模式中使用" class="sidebar-link">2.12 Symbol在单例模式中使用</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-13-iterator" class="sidebar-link">2.13 Iterator</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-14-generator函数" class="sidebar-link">2.14 Generator函数</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-生成器作用" class="sidebar-link">1.生成器作用</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-yield语句和return语句的区别" class="sidebar-link">2.yield语句和return语句的区别:</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_3-generator函数内阶段代码不next不执行" class="sidebar-link">3.Generator函数内阶段代码不next不执行</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_4-next传参机制" class="sidebar-link">4.next传参机制</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_5-for-of处理generator" class="sidebar-link">5.for..of处理Generator</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_6-generator-for-of实现斐波那契" class="sidebar-link">6.Generator+for..of实现斐波那契</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_7-yield-语法" class="sidebar-link">7.yield*语法</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-15-promise" class="sidebar-link">2.15 Promise</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-简单理解" class="sidebar-link">1.简单理解:</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-语法" class="sidebar-link">2.语法:</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#promise-all-批量接收" class="sidebar-link">Promise.all() 批量接收</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#promise-race-优先接收" class="sidebar-link">Promise.race() 优先接收</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#promise-resolve" class="sidebar-link">Promise.resolve()</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#promise-prototype-finally实现" class="sidebar-link">Promise.prototype.finally实现</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#promise-generator" class="sidebar-link">Promise+Generator</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-15-async和异步操作" class="sidebar-link">2.15 Async和异步操作</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-异步编程的方式" class="sidebar-link">1.异步编程的方式</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-异步的理解" class="sidebar-link">2. 异步的理解</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-16-async" class="sidebar-link">2.16 Async</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_1-async的原理" class="sidebar-link">1.async的原理</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-17-class类" class="sidebar-link">2.17 Class类</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#class注意项" class="sidebar-link">class注意项:</a></li></ul></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-14-generator函数-2" class="sidebar-link">2.14 Generator函数</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-14-generator函数-3" class="sidebar-link">2.14 Generator函数</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-14-generator函数-4" class="sidebar-link">2.14 Generator函数</a></li><li class="sidebar-sub-header"><a href="/Js_basis/2.ES6.html#_2-14-generator函数-5" class="sidebar-link">2.14 Generator函数</a></li></ul></li><li><a href="/Js_basis/3.基础面试题.html" class="sidebar-link">3.基础面试题</a></li></ul></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Js高级</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable is-sub-group depth-1"><p class="sidebar-heading"><span>Js问题整理</span> <span class="arrow right"></span></p> <!----></section></li></ul></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vue-Router</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Vuex</span> <span class="arrow right"></span></p> <!----></section></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>小程序</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="_2-es6"><a href="#_2-es6" aria-hidden="true" class="header-anchor">#</a> 2.ES6</h1> <h2 id="_2-1-变量声明扩展"><a href="#_2-1-变量声明扩展" aria-hidden="true" class="header-anchor">#</a> 2.1 变量声明扩展</h2> <ul><li><p>原有变量声明: var</p> <ul><li>有变量声明提升</li> <li>没有块级作用域</li> <li>不方便维护,代码格式松散</li></ul></li> <li><p>let</p> <ul><li>没有变量声明提升. 声明之前使用会报错</li> <li>有块级作用域. 配合for循环使用,会保留块级作用域变量</li> <li>只允许声明一次,值可以多次覆盖</li></ul></li> <li><p>const</p> <ul><li>没有变量声明提升, 声明之前使用会报错</li> <li>声明就要赋值, 不允许多次声明和修改</li> <li>有块级作用域</li></ul></li></ul> <p>====================================================================</p> <h2 id="_2-2-解构赋值"><a href="#_2-2-解构赋值" aria-hidden="true" class="header-anchor">#</a> 2.2 解构赋值</h2> <h3 id="数组对象解构赋值"><a href="#数组对象解构赋值" aria-hidden="true" class="header-anchor">#</a> 数组对象解构赋值:</h3> <ul><li>注意点: 只要对应值是undefined 默认值才生效, 除undefined外任何值都会给变量赋值. 包括null</li></ul> <h3 id="_1-数组解构"><a href="#_1-数组解构" aria-hidden="true" class="header-anchor">#</a> 1. 数组解构</h3> <ul><li>变量赋值(可以指定默认值)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token comment">// a=1 b=2 c=3</span>

    <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span> <span class="token operator">...</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token comment">// a=1 b=undefined c=[]</span>

    <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span> <span class="token operator">...</span>b<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token comment">// a=1 b=[2,3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>等号右边必须是可遍历结构如: 数组,Set,Iterator等</li> <li>面试题:</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'aaa'</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> <span class="token punctuation">[</span>x <span class="token operator">=</span> <span class="token function">f</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token comment">// 函数f不会执行, 数组中默认值是惰性的, 即 x只先接收等号右边的值1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-对象解构"><a href="#_2-对象解构" aria-hidden="true" class="header-anchor">#</a> 2. 对象解构</h3> <ul><li>变量赋值(可以指定默认值)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token string">'与数组解构不同的是: 数组解构按索引的顺序赋值, 对象的结构是按属性名字赋值'</span>
    <span class="token keyword">let</span> <span class="token punctuation">{</span> a <span class="token punctuation">,</span> b <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span><span class="token number">1</span> <span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">2</span> <span class="token punctuation">}</span>
    <span class="token comment">// a=1 b=2</span>

    <span class="token keyword">let</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span>b <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> a<span class="token punctuation">:</span><span class="token number">1</span> <span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">2</span> <span class="token punctuation">}</span>
    <span class="token comment">// b=1  a本次做属性,b才做变量</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>面试题</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span><span class="token punctuation">[</span>
            <span class="token number">1</span><span class="token punctuation">,</span>
            <span class="token punctuation">[</span>c<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span><span class="token punctuation">[</span>
            b<span class="token punctuation">,</span>
            <span class="token punctuation">[</span>c<span class="token punctuation">]</span>
        <span class="token punctuation">]</span>
    <span class="token punctuation">}</span> <span class="token operator">=</span> obj

    <span class="token comment">// b=1 , c=2</span>
    <span class="token comment">// 两个对象中a都是做属性, 值数组中解构按照索引对应:  b对应1, [c]对应[c:2] , c为2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><h3 id="_3-字符串解构"><a href="#_3-字符串解构" aria-hidden="true" class="header-anchor">#</a> 3. 字符串解构</h3> <ul><li>字符串会被拆成数组参与结构, 与数组类似</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token string">'123'</span>
    <span class="token comment">//a='1' b='2' c='3'</span>

    <span class="token keyword">let</span> <span class="token punctuation">{</span> length<span class="token punctuation">:</span>len <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token string">'123'</span>
    <span class="token comment">// len = 3   字符串共享length属性,值是字符串长度</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_4-数字-布尔值解构"><a href="#_4-数字-布尔值解构" aria-hidden="true" class="header-anchor">#</a> 4. 数字,布尔值解构</h3> <ul><li>解构时等号右边的数字或字母会被包装成对应类型的 对象</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">{</span> toString<span class="token punctuation">:</span> a <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token number">123</span>
    <span class="token comment">// a=Number.prototype.toString</span>
    <span class="token comment">// 可以理解为:  123 === 数字Number实例:123.__proto__</span>
    <span class="token comment">// 也就是 {toString : a} = Number.prototype</span>
    <span class="token comment">// 数字包装对象Nunmber 原型方法中</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-函数参数解构"><a href="#_5-函数参数解构" aria-hidden="true" class="header-anchor">#</a> 5. 函数参数解构</h3> <ul><li>参数数组解构 === 接收有默认值的形参</li> <li>其余参考数组,对象解构</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token punctuation">[</span>a<span class="token punctuation">,</span>b<span class="token punctuation">]</span></span> <span class="token punctuation">)</span><span class="token punctuation">{</span> <span class="token comment">/*逻辑*/</span> <span class="token punctuation">}</span>
    <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>

    等价于

    <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token comment">/*逻辑*/</span> <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><ul><li>面试题</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span> <span class="token parameter"><span class="token punctuation">{</span>a<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">,</span> b<span class="token operator">=</span><span class="token number">2</span><span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span></span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token punctuation">)</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    
    <span class="token comment">// 1 , 2  ab使用默认值</span>

    <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span><span class="token number">0</span> <span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">1</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>   
    <span class="token comment">// 0 , 1  ab使用解构传入参数值</span>

    <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">{</span> a<span class="token punctuation">:</span><span class="token number">0</span> <span class="token punctuation">}</span><span class="token punctuation">)</span>  
    <span class="token comment">// 0 , 2 a使用实参解构,b使用默认值</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><p>====================================================================</p> <h2 id="_2-3-字符串扩展"><a href="#_2-3-字符串扩展" aria-hidden="true" class="header-anchor">#</a> 2.3 字符串扩展</h2> <h3 id="_1-遍历字符串-for-of"><a href="#_1-遍历字符串-for-of" aria-hidden="true" class="header-anchor">#</a> 1. 遍历字符串 for...of</h3> <ul><li>更健壮的循环字符串</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    传统需要
        str<span class="token punctuation">.</span>split<span class="token punctuation">[</span><span class="token string">''</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span> 
        或者 
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">var</span> i <span class="token operator">=</span><span class="token number">0</span> <span class="token punctuation">;</span> i<span class="token operator">&lt;</span>str<span class="token punctuation">.</span>length <span class="token punctuation">;</span>i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span> str<span class="token punctuation">.</span><span class="token function">charCodeAt</span><span class="token punctuation">(</span>i<span class="token punctuation">)</span> <span class="token punctuation">}</span>

    现在只需要 
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> code <span class="token keyword">of</span> str<span class="token punctuation">)</span><span class="token punctuation">{</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>code<span class="token punctuation">)</span> <span class="token punctuation">}</span>
    优点<span class="token punctuation">:</span>更准确<span class="token punctuation">,</span>范围更广
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h3 id="_2-获取内容-at-i"><a href="#_2-获取内容-at-i" aria-hidden="true" class="header-anchor">#</a> 2. 获取内容 at(i)</h3> <ul><li>更健壮的获取字符串指定位置的中文内容</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
    <span class="token keyword">let</span> str <span class="token operator">=</span> <span class="token string">'𠮷'</span>

    传统需要 
        str<span class="token punctuation">.</span><span class="token function">charAt</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>   <span class="token comment">// &quot;\uD842&quot; 获取到urf编码的第一个字节</span>
    
    现在需要
        str<span class="token punctuation">.</span><span class="token function">at</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span>       <span class="token comment">// '𠮷'     获取内容</span>
        
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="_3-检测内容-includes-startswith-endswidth"><a href="#_3-检测内容-includes-startswith-endswidth" aria-hidden="true" class="header-anchor">#</a> 3. 检测内容 includes() | startsWith() | endsWidth()</h3> <ul><li>includes()：返回布尔值，表示是否找到了参数字符串。</li> <li>startsWith()：返回布尔值，表示参数字符串是否在源字符串的头部。</li> <li>endsWith()：返回布尔值，表示参数字符串是否在源字符串的尾部。</li></ul> <h3 id="_4-头尾补全-padstart-padend"><a href="#_4-头尾补全-padstart-padend" aria-hidden="true" class="header-anchor">#</a> 4. 头尾补全 padStart() | padEnd()</h3> <ul><li>参数1:目标长度 , 参数2:用来做补全的内容.</li> <li>padStart  用于头部补全;</li> <li>padEnd    用于尾部补全</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token string">'x'</span><span class="token punctuation">.</span><span class="token function">padStart</span><span class="token punctuation">(</span><span class="token string">'123'</span> <span class="token punctuation">,</span> <span class="token number">6</span><span class="token punctuation">)</span> <span class="token comment">// '12312x'</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><h3 id="_5-字符串重复拼接n次的结果返回-repeat-n"><a href="#_5-字符串重复拼接n次的结果返回-repeat-n" aria-hidden="true" class="header-anchor">#</a> 5. 字符串重复拼接n次的结果返回 repeat(n)</h3> <ul><li>n如果是有整有小数,取整数</li> <li>传入负值报错</li> <li>n如果是NaN ,表示0次</li></ul> <h3 id="_6-模板字符串-变量"><a href="#_6-模板字符串-变量" aria-hidden="true" class="header-anchor">#</a> 6. 模板字符串 &quot; <code>${变量}</code> &quot;</h3> <ul><li>如果内容是反引号,使用反斜线转义 '`'</li> <li>模板字符串中的空格和索引会保留</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token function">$</span><span class="token punctuation">(</span><span class="token string">'#list'</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">html</span><span class="token punctuation">(</span><span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">
        &lt;ul&gt;
            &lt;li&gt;first&lt;/li&gt;
            &lt;li&gt;second&lt;/li&gt;
        &lt;/ul&gt;
    </span><span class="token template-punctuation string">`</span></span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><p>====================================================================</p> <h2 id="_2-4-正则扩展"><a href="#_2-4-正则扩展" aria-hidden="true" class="header-anchor">#</a> 2.4 正则扩展</h2> <h3 id="_1-regexp实例方法"><a href="#_1-regexp实例方法" aria-hidden="true" class="header-anchor">#</a> 1.RegExp实例方法</h3> <ul><li>match()</li> <li>replace()</li> <li>split()</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>正则方法整理<span class="token punctuation">:</span>

<span class="token number">1.</span>test：测试string是否包含有匹配结果，包含返回<span class="token boolean">true</span>，不包含返回<span class="token boolean">false</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;bbs.byr.cn&quot;</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/b/</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> ret <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">test</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token function">alert</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//true </span>

<span class="token number">2.</span>match：根据pattern进行正则匹配<span class="token punctuation">,</span>如果匹配到<span class="token punctuation">,</span>返回匹配结果<span class="token punctuation">,</span>如匹配不到返回<span class="token keyword">null</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;ThIS isn't me&quot;</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/is/ig</span><span class="token punctuation">;</span> <span class="token comment">// g 全局匹配, i忽略大小写</span>
    <span class="token keyword">var</span> ret <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">match</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token function">alert</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//IS, is </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[&quot;IS&quot;, &quot;is&quot;] </span>

<span class="token number">3.</span>search ：根据pattern进行正则匹配<span class="token punctuation">,</span>如果匹配到一个结果<span class="token punctuation">,</span>则返回它的索引数<span class="token punctuation">;</span>否则返回<span class="token operator">-</span><span class="token number">1</span>
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;This isn't me&quot;</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/is/</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> ret <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">search</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token function">alert</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//2 </span>

<span class="token number">4.</span>replace：根据pattern进行正则匹配<span class="token punctuation">,</span>把匹配结果替换为replacement
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;i love china!&quot;</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> pattern <span class="token operator">=</span> <span class="token regex">/i/g</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> ret <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">replace</span><span class="token punctuation">(</span>pattern<span class="token punctuation">,</span> <span class="token string">&quot;I&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token function">alert</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//I love chIna! </span>

<span class="token number">5.</span>split：根据pattern进行正则分割<span class="token punctuation">,</span>返回一个分割的数组
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">'http://www.baidu.com/'</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/\W/</span><span class="token punctuation">;</span>     <span class="token comment">// \W 特殊符号  \w非特殊符号</span>
    <span class="token keyword">var</span> ret <span class="token operator">=</span> str<span class="token punctuation">.</span><span class="token function">split</span><span class="token punctuation">(</span>reg<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[&quot;http&quot;, &quot;&quot;, &quot;&quot;, &quot;www&quot;, &quot;baidu&quot;, &quot;com&quot;, &quot;&quot;]</span>

<span class="token number">6.</span>exec：对string进行正则处理<span class="token punctuation">,</span>并返回匹配结果<span class="token punctuation">.</span>array<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span>为原字符串<span class="token punctuation">,</span>array<span class="token punctuation">[</span>i<span class="token punctuation">]</span>为匹配在整个被搜索字符串中的位置
    <span class="token keyword">var</span> str <span class="token operator">=</span> <span class="token string">&quot;i love china!&quot;</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> reg <span class="token operator">=</span> <span class="token regex">/i\B/g</span><span class="token punctuation">;</span> 
    <span class="token keyword">var</span> ret <span class="token operator">=</span> reg<span class="token punctuation">.</span><span class="token function">exec</span><span class="token punctuation">(</span>str<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token function">alert</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// i </span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>ret<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">//[&quot;i&quot;, index: 9, input: &quot;i love china!&quot;] </span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br><span class="line-number">36</span><br><span class="line-number">37</span><br><span class="line-number">38</span><br><span class="line-number">39</span><br></div></div><ul><li>正则表达式基础:</li></ul> <table><thead><tr><th>符号</th> <th>含义</th></tr></thead> <tbody><tr><td>^</td> <td>以..开头</td></tr> <tr><td>$</td> <td>以..结尾</td></tr> <tr><td>*</td> <td>0次-多次,等价于{0,}</td></tr> <tr><td>+</td> <td>1次-多次,等价于{1,}</td></tr> <tr><td>?</td> <td>0次-1次,等价于{0,1}</td></tr> <tr><td>{n}</td> <td>匹配刚好出现n次</td></tr> <tr><td>{n,}</td> <td>匹配至少出现n次</td></tr> <tr><td>{n,m}</td> <td>匹配出现n - m 次</td></tr> <tr><td>.</td> <td>除换行外任意字符</td></tr> <tr><td>\d</td> <td>匹配一个数字 等价于[0 - 9]</td></tr> <tr><td>\D</td> <td>匹配一个非数字字符 等价于[ ^0-9]</td></tr> <tr><td>x | y</td> <td>匹配x或y</td></tr> <tr><td>[x y z]</td> <td>匹配方括号中的任意字符</td></tr> <tr><td>[^x y z]</td> <td>它匹配任何没有包含在方括号中的字符</td></tr> <tr><td>x(?=y)</td> <td>匹配'x'仅仅当'x'后面跟着'y'</td></tr> <tr><td>(?=y)x</td> <td>匹配'x'仅仅当'x'前面是'y'</td></tr> <tr><td>x(?!y)</td> <td>仅仅当'x'后面不跟着'y'时匹配'x'</td></tr> <tr><td>(?&lt;!y)x</td> <td>仅仅当'x'前面不是'y'时匹配'x'</td></tr></tbody></table> <h3 id="_2-regexp静态方法"><a href="#_2-regexp静态方法" aria-hidden="true" class="header-anchor">#</a> 2.RegExp静态方法</h3> <ul><li>escape(str)
<ul><li>把参数经过转义后返回</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> res <span class="token operator">=</span> <span class="token function">escape</span><span class="token punctuation">(</span><span class="token string">'[{&quot;*&quot;,&quot;!&quot;}]'</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div></li></ul> <p>====================================================================</p> <h2 id="_2-5-数组扩展"><a href="#_2-5-数组扩展" aria-hidden="true" class="header-anchor">#</a> 2.5 数组扩展</h2> <ul><li>Array() 参数个数的特性
<ul><li>0个参数: 创建空数组.          Array()===[]</li> <li>1个参数: 创建参数长度的数组.   Array(4) === [ , , , ]</li> <li>2个以上参数: 参数为数组内容.   Array(1,2,3) === [1,2,3]</li></ul></li> <li>可以使用Array.of() 代替Array() 方法,传参处理统一作为函数的内容
<ul><li>n个参数: 创建数组, 参数是数组项. Array.of(undefined) === [undefined]</li></ul></li></ul> <h3 id="_1-array-from-伪数组-把伪数组转数组"><a href="#_1-array-from-伪数组-把伪数组转数组" aria-hidden="true" class="header-anchor">#</a> 1. Array.from(伪数组)___把伪数组转数组</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> likeArray <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token string">'0'</span><span class="token punctuation">:</span><span class="token string">'a'</span><span class="token punctuation">,</span>
        <span class="token string">'1'</span><span class="token punctuation">:</span><span class="token string">'b'</span><span class="token punctuation">,</span>
        length<span class="token punctuation">:</span><span class="token number">2</span>
    <span class="token punctuation">}</span>

<span class="token number">1.</span>把伪数组转数组
    es5写法<span class="token punctuation">:</span>
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">]</span><span class="token punctuation">.</span><span class="token function">slice</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span>likeArray<span class="token punctuation">)</span>

    es6写法<span class="token punctuation">:</span>
    <span class="token keyword">let</span> arr2 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>likeArray<span class="token punctuation">)</span>

    <span class="token comment">//结果: ['a' , 'b' ]</span>


<span class="token number">2.</span>处理伪数组时顺带加工数据
    <span class="token keyword">let</span> arr3 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>likeArray <span class="token punctuation">,</span> <span class="token parameter">item</span> <span class="token operator">=&gt;</span> item<span class="token punctuation">.</span><span class="token function">toUpperCase</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span>
    <span class="token comment">// 结果: ['A' ,'B']</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="_2-扩展运算符获取处理伪数组"><a href="#_2-扩展运算符获取处理伪数组" aria-hidden="true" class="header-anchor">#</a> 2. 扩展运算符获取处理伪数组</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
    <span class="token keyword">let</span> nodeArr <span class="token operator">=</span> <span class="token punctuation">[</span> <span class="token operator">...</span>document<span class="token punctuation">.</span><span class="token function">getElementByTagName</span><span class="token punctuation">(</span><span class="token string">'li'</span><span class="token punctuation">)</span> <span class="token punctuation">]</span>
    
    nodeArr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_3-array-of-把实参列表数据存入数组"><a href="#_3-array-of-把实参列表数据存入数组" aria-hidden="true" class="header-anchor">#</a> 3. Array.of()___把实参列表数据存入数组</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> arr4 <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">of</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span>
    <span class="token comment">// [1,2,3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="_5-array-prototype-find-callback-按照callback查找项-findindex-callback-查索引"><a href="#_5-array-prototype-find-callback-按照callback查找项-findindex-callback-查索引" aria-hidden="true" class="header-anchor">#</a> 5. Array.prototype.find(callback)___按照callback查找项 || ~.findIndex(callback)___查索引</h3> <ul><li>数组实例的find方法，用于找出第一个符合条件的数组成员.如果没有符合条件的成员，则返回undefined</li> <li>数组实例的findIndex方法, 返回第一个符合条件的数组成员的位置，如果所有成员都不符合条件，则返回-1</li></ul> <h3 id="_6-array-prototype-fill-arg-用arg填满数组"><a href="#_6-array-prototype-fill-arg-用arg填满数组" aria-hidden="true" class="header-anchor">#</a> 6. Array.prototype.fill(arg)___用arg填满数组</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span>
    arr<span class="token punctuation">.</span><span class="token function">fill</span><span class="token punctuation">(</span><span class="token string">'6'</span><span class="token punctuation">)</span>
    <span class="token comment">// arr=== ['6','6','6','6']</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><h3 id="_7-array-prototype-entries-keys-values-遍历数组"><a href="#_7-array-prototype-entries-keys-values-遍历数组" aria-hidden="true" class="header-anchor">#</a> 7. Array.prototype.entries(),keys(),values()___遍历数组</h3> <ul><li><code>用来处理JSON数组</code></li> <li>都返回一个遍历器对象,用for...of循环进行遍历</li> <li>keys()是对键名的遍历</li> <li>values()是对键值的遍历</li> <li>entries()是对键值对的遍历</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token string">'a'</span> <span class="token punctuation">,</span> <span class="token string">'b'</span><span class="token punctuation">]</span>

<span class="token number">1.</span>keys
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> index <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>index<span class="token punctuation">)</span>
        <span class="token comment">// '0'  ,  '1' </span>
    <span class="token punctuation">}</span>

<span class="token number">2.</span>values
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> val <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>val<span class="token punctuation">)</span>
        <span class="token comment">// 'a' , 'b'</span>
    <span class="token punctuation">}</span>

<span class="token number">3.</span>entries
    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> item <span class="token keyword">of</span> arr<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
        <span class="token comment">// { '0':'a' }  ,  { '1':'b' }</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br></div></div><h3 id="_8-array-prototype-includes-判断数组是否包含参数"><a href="#_8-array-prototype-includes-判断数组是否包含参数" aria-hidden="true" class="header-anchor">#</a> 8. Array.prototype.includes()___判断数组是否包含参数</h3> <ul><li>类似String.prototype.includes() 不过 String下的是ES7方法</li></ul> <h3 id="_9-es5-6-处理数组空位"><a href="#_9-es5-6-处理数组空位" aria-hidden="true" class="header-anchor">#</a> 9. ES5/6 处理数组空位</h3> <ul><li><p>ES5处理空位</p> <ul><li>forEach(), filter(), every() 和some()都会跳过空位。</li> <li>map()会跳过空位，但会保留这个值</li> <li>join()和toString()会将空位视为undefined，而undefined和null会被处理成空字符串</li></ul></li> <li><p>ES6处理空位</p> <ul><li>全部做undefined</li></ul></li> <li><p>扩展运算符处理空位</p> <ul><li>全部做undefined</li></ul></li></ul> <p>====================================================================</p> <h2 id="_2-6-函数扩展"><a href="#_2-6-函数扩展" aria-hidden="true" class="header-anchor">#</a> 2.6 函数扩展</h2> <h3 id="_1-参数初始值"><a href="#_1-参数初始值" aria-hidden="true" class="header-anchor">#</a> 1.参数初始值</h3> <ul><li>在参数列表中 使用等号接收一个值,作为初始值</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">fn</span> <span class="token punctuation">(</span> <span class="token parameter">a<span class="token punctuation">,</span>b<span class="token operator">=</span><span class="token number">1</span></span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>a<span class="token operator">+</span>b<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span> <span class="token comment">// 3</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="_2函数length属性"><a href="#_2函数length属性" aria-hidden="true" class="header-anchor">#</a> 2函数length属性</h3> <ul><li>返回没有指定默认值的参数</li> <li>如果设置了参数默认值,函数length属性失真</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>    <span class="token comment">//3</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn<span class="token punctuation">.</span>length<span class="token punctuation">)</span> <span class="token comment">//3</span>


    <span class="token keyword">function</span> <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token parameter">a<span class="token punctuation">,</span>b<span class="token punctuation">,</span>c<span class="token operator">=</span><span class="token number">3</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn2<span class="token punctuation">.</span>length<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">fn2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>   <span class="token comment">//2 失真</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>fn2<span class="token punctuation">.</span>length<span class="token punctuation">)</span>  <span class="token comment">//2 失真</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_3函数的作用域"><a href="#_3函数的作用域" aria-hidden="true" class="header-anchor">#</a> 3函数的作用域</h3> <ul><li>详情见 <code>JS进阶作用域,作用域链</code></li></ul> <h3 id="_4扩展运算符"><a href="#_4扩展运算符" aria-hidden="true" class="header-anchor">#</a> 4扩展运算符</h3> <ul><li>可以用来展开数组</li> <li>用在函数参数中, 将数组参数转成参数列表</li> <li><code>合并数组</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token number">1.</span> <span class="token constant">ES5</span>旧写法
    arr1<span class="token punctuation">.</span><span class="token function">concat</span><span class="token punctuation">(</span>arr2<span class="token punctuation">)</span>

    <span class="token number">2.</span> <span class="token constant">ES6</span>
    <span class="token punctuation">[</span><span class="token operator">...</span>arr1 <span class="token punctuation">,</span> <span class="token operator">...</span>arr2<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h3 id="_5-name属性"><a href="#_5-name属性" aria-hidden="true" class="header-anchor">#</a> 5.name属性</h3> <ul><li>返回函数的名字(浏览器早就支持了)</li></ul> <h3 id="_6-箭头函数"><a href="#_6-箭头函数" aria-hidden="true" class="header-anchor">#</a> 6.箭头函数</h3> <ul><li>省略function关键字,用=&gt; 替代</li> <li>参数放在箭头前的小括号中</li> <li>函数体内部如果只有返回值时花括号可以省略</li> <li>函数内部this指向 声明函数所在环境中的this,不能在内部获取arguments</li> <li>不能new , call , apply , bind</li> <li>使用双冒号绑定函数中的this<div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token number">1.</span><span class="token comment">//ES5写法</span>
    <span class="token function">fn</span><span class="token punctuation">.</span><span class="token function">call</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// {a:1}</span>

    <span class="token number">2.</span><span class="token comment">//ES6写法</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    o<span class="token punctuation">:</span><span class="token punctuation">:</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// {a:1}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ul> <h3 id="_7-函数尾调用"><a href="#_7-函数尾调用" aria-hidden="true" class="header-anchor">#</a> 7.函数尾调用</h3> <ul><li>一个函数执行的最后是调用另外一个函数</li> <li>函数嵌套</li> <li>外层函数返回值是 另一个函数的调用
<ul><li>调用帧: 一个函数调用时,在内存中记录该函数局部变量和函数调用位置</li> <li>调用栈: 函数套函数调用,没有return的函数调用帧会层层记录,叫调用栈</li></ul></li></ul> <br> <p><code>不优化写法</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
    <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>

    <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    缺点<span class="token punctuation">:</span>
    <span class="token constant">A</span>执行时会在内存中 记录<span class="token constant">B</span>的调用位置和其他相关变量
    <span class="token constant">B</span>执行时会在内存中 继续记录<span class="token constant">C</span>的调用位置和变量
    等<span class="token constant">C</span>调用结束才会释放<span class="token constant">B</span>中记录的内存<span class="token punctuation">,</span>继而释放<span class="token constant">A</span>中的内存<span class="token punctuation">.</span> 会造成内存损耗
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><code>尾调用优化写法</code></p> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token constant">B</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token constant">C</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">1</span>
    <span class="token punctuation">}</span>

    <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    优点<span class="token punctuation">:</span>
    <span class="token constant">A</span>执行结束遇到<span class="token template-string"><span class="token template-punctuation string">`</span><span class="token string">return 函数调用</span><span class="token template-punctuation string">`</span></span>就会直接释放<span class="token constant">A</span>函数中的内存记录

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_8-函数尾递归"><a href="#_8-函数尾递归" aria-hidden="true" class="header-anchor">#</a> 8.函数尾递归</h3> <ul><li>严格模式下有效. ES5下函数内部有arguments和caller</li> <li>尾调用 + 递归 = 尾递归</li> <li>递归非常消耗性能, 尾调用可以极大减少函数调用栈的内容.</li> <li>推荐在递归时使用尾调用,可以避免栈内存溢出</li> <li>递归改写尾递归:
<ul><li>1.<code>把局部变量全部提取成参数,把递归逻辑写入参数中</code></li> <li>2.<code>保证函数最后返回1个自身调用</code></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 兔子数</span>
    <span class="token number">1.</span>递归写法
    <span class="token keyword">function</span> <span class="token function">Feib</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span> <span class="token operator">||</span>n<span class="token operator">==</span><span class="token number">2</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">Feib</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token operator">+</span><span class="token function">Feib</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">Feib</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>

    <span class="token number">2.</span>尾递归写法
    <span class="token keyword">function</span> <span class="token function">Feib</span><span class="token punctuation">(</span><span class="token parameter">n <span class="token punctuation">,</span> num1<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">,</span> num0<span class="token operator">=</span><span class="token number">1</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
        <span class="token comment">// 返回函数调用, 同时把逻辑写入参数中</span>
        <span class="token keyword">return</span> <span class="token function">Feib</span><span class="token punctuation">(</span> n<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">,</span> num0 <span class="token punctuation">,</span> num0<span class="token operator">+</span>num1 <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">Feib</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">)</span>

    <span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span><span class="token operator">--</span>

    <span class="token number">3.</span><span class="token comment">//强化求阶乘</span>
    <span class="token keyword">function</span> <span class="token function">Jc</span><span class="token punctuation">(</span><span class="token parameter">n</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">==</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">Jc</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">1</span><span class="token punctuation">)</span> <span class="token operator">*</span> <span class="token function">Jc</span><span class="token punctuation">(</span>n<span class="token operator">-</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token comment">// 尾递归</span>
    <span class="token keyword">function</span> <span class="token function">Jc</span><span class="token punctuation">(</span> <span class="token parameter">n <span class="token punctuation">,</span> num0<span class="token operator">=</span><span class="token number">1</span> <span class="token punctuation">,</span> num1<span class="token operator">=</span><span class="token number">2</span></span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>n<span class="token operator">&lt;=</span><span class="token number">1</span><span class="token punctuation">)</span><span class="token keyword">return</span> <span class="token number">1</span>
        <span class="token keyword">return</span> <span class="token function">Jc</span><span class="token punctuation">(</span> n<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">,</span> num0<span class="token operator">-</span><span class="token number">1</span> <span class="token punctuation">,</span> num0<span class="token operator">*</span>num1<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br><span class="line-number">31</span><br><span class="line-number">32</span><br><span class="line-number">33</span><br><span class="line-number">34</span><br><span class="line-number">35</span><br></div></div><h3 id="_9-蹦床函数"><a href="#_9-蹦床函数" aria-hidden="true" class="header-anchor">#</a> 9.蹦床函数</h3> <ul><li>把递归函数转为循环,防止内存溢出</li> <li>接收递归函数的调用做参数</li> <li>只要参数---递归函数调用结果,是个函数就单独返回</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>
    <span class="token number">1.</span> 保证传入的是递归函数的调用
    <span class="token number">2.</span> 检测的是递归函数的结果 
    <span class="token number">3.</span> 如果结果是函数类型<span class="token punctuation">,</span>则利用闭包单独返回这个函数
    <span class="token number">4.</span> <span class="token operator">!</span><span class="token operator">!</span><span class="token operator">!</span>特别重要<span class="token punctuation">:</span> 在递归函数的返回值修改 内部<span class="token keyword">this</span>指向为<span class="token keyword">null</span>

    <span class="token keyword">function</span> <span class="token function">BBoom</span><span class="token punctuation">(</span><span class="token parameter">dguiFnReturn</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">while</span><span class="token punctuation">(</span>dguiFnReturn <span class="token operator">&amp;&amp;</span> dguiFnReturn instanceOf Function<span class="token punctuation">)</span><span class="token punctuation">{</span>
            dguiFnReturn <span class="token operator">=</span> <span class="token function">dguiFnReturn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> dguiFnReturn
    <span class="token punctuation">}</span>

    <span class="token comment">// 累加求和 尾递归</span>
    <span class="token keyword">function</span> <span class="token function">sumTotal</span><span class="token punctuation">(</span><span class="token parameter">num <span class="token punctuation">,</span> num0 <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">,</span> num1 <span class="token operator">=</span> <span class="token number">1</span></span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>num <span class="token operator">&lt;=</span><span class="token number">0</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">0</span>
        <span class="token punctuation">}</span>
        <span class="token keyword">return</span> <span class="token function">sumTotal</span><span class="token punctuation">.</span><span class="token function">bind</span><span class="token punctuation">(</span><span class="token keyword">null</span>  <span class="token punctuation">,</span> num <span class="token operator">-</span> <span class="token number">1</span> <span class="token punctuation">,</span> num0 <span class="token punctuation">,</span> num0<span class="token operator">+</span>num1 <span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">BBoom</span><span class="token punctuation">(</span><span class="token function">sumTotal</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h2 id="_2-7-对象扩展"><a href="#_2-7-对象扩展" aria-hidden="true" class="header-anchor">#</a> 2.7 对象扩展</h2> <h3 id="_1-对象简写"><a href="#_1-对象简写" aria-hidden="true" class="header-anchor">#</a> 1.对象简写</h3> <ul><li>如果对象属性值是变量,且与属性同名,可以简写</li> <li>对象方法的 <code>:function</code> 可以省略</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> name <span class="token operator">=</span> <span class="token string">'xm'</span>
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        name<span class="token punctuation">,</span>
        <span class="token function">say</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token comment">//do smting</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>obj<span class="token punctuation">)</span>
    <span class="token comment">// {name:'xm' , say:function(){}}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>CommonJs模块化导出和接收方法很适合简写</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 模块导出</span>
    <span class="token keyword">const</span> <span class="token function-variable function">$setHeaders</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token keyword">const</span> <span class="token function-variable function">$setResponseData</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>

    module<span class="token punctuation">.</span>exports <span class="token operator">=</span> <span class="token punctuation">{</span> $setHeaders <span class="token punctuation">,</span> $setResponseData <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_2-对象全等-object-is-o1-o2"><a href="#_2-对象全等-object-is-o1-o2" aria-hidden="true" class="header-anchor">#</a> 2.对象全等 Object.is(o1,o2)</h3> <ul><li><code>==</code>会数据类型转换</li> <li><code>===</code>判断不能处理NaN: NaN不等于NaN</li> <li>Object.is(对象1,对象2) 可以判断两个对象是否全等</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token keyword">let</span> o3 <span class="token operator">=</span> o1
    Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span> o2<span class="token punctuation">)</span> <span class="token comment">// false  内容相同,地址不同</span>
    Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span>o1<span class="token punctuation">,</span>o3<span class="token punctuation">)</span>  <span class="token comment">// true   完全相等</span>
    Object<span class="token punctuation">.</span><span class="token function">is</span><span class="token punctuation">(</span><span class="token number">NaN</span> <span class="token punctuation">,</span> <span class="token number">NaN</span><span class="token punctuation">)</span> <span class="token comment">// true</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br></div></div><h3 id="_3-对象合并-object-assign-target-o1-o2"><a href="#_3-对象合并-object-assign-target-o1-o2" aria-hidden="true" class="header-anchor">#</a> 3.对象合并 Object.assign(target , o1,o2)</h3> <ul><li>将o1,o2的内容 合并到 target中</li> <li>同名属性后来居上</li> <li>一个参数返回参数自身</li> <li>处理数组时会把数组索引当做属性, 即: 同索引值 后面覆盖前面</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token number">1.</span>浅拷贝
    <span class="token keyword">let</span> target <span class="token operator">=</span> <span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span>
    <span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>b<span class="token punctuation">:</span><span class="token number">2</span><span class="token punctuation">}</span>
    <span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>c<span class="token punctuation">:</span><span class="token number">3</span><span class="token punctuation">}</span>
    Object<span class="token punctuation">.</span><span class="token function">assign</span><span class="token punctuation">(</span> target<span class="token punctuation">,</span> o1 <span class="token punctuation">,</span> o2  <span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target<span class="token punctuation">)</span> <span class="token comment">// { a:1 ,b:2 ,c:3}</span>

    <span class="token number">2.</span>处理数组
    <span class="token keyword">let</span> arr1<span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> arr2 <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> target2 <span class="token operator">=</span> Object<span class="token punctuation">.</span><span class="token function">assgin</span><span class="token punctuation">(</span>target2 <span class="token punctuation">,</span> arr1 <span class="token punctuation">,</span> arr2<span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>target2<span class="token punctuation">)</span> <span class="token comment">// [4,5,3]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_4-对象解构"><a href="#_4-对象解构" aria-hidden="true" class="header-anchor">#</a> 4.对象解构</h3> <ul><li>对象解构赋值,解构要放最后.否则报错</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> <span class="token punctuation">{</span>x <span class="token punctuation">,</span> y <span class="token punctuation">,</span> z <span class="token punctuation">}</span> <span class="token operator">=</span> <span class="token punctuation">{</span> x<span class="token punctuation">:</span><span class="token number">1</span> <span class="token punctuation">,</span> y<span class="token punctuation">:</span><span class="token number">2</span> <span class="token punctuation">,</span> a<span class="token punctuation">:</span><span class="token number">3</span> <span class="token punctuation">,</span> b<span class="token punctuation">:</span><span class="token number">4</span><span class="token punctuation">}</span>
    <span class="token comment">// x 1</span>
    <span class="token comment">// y 2</span>
    <span class="token comment">// z {a:3 , b:4}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h2 id="_2-8-symbol类型"><a href="#_2-8-symbol类型" aria-hidden="true" class="header-anchor">#</a> 2.8 Symbol类型</h2> <ul><li>独一无二的值</li> <li>传统对象属性都是字符串,添加方法和名字的时候有可能重名,使用Symbol类型可以保证唯一性</li> <li>JS 7 种数据类型: String Boolean Number Null Undefined Object Symbol</li> <li>Symbol类型创建不能使用new! 不是对象,但像字符串</li> <li>Symbol类型可以转字符串,不能转数字(不能做运算)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    创建一个Symbol数据
    <span class="token number">1.</span><span class="token comment">// Symbol调用 多个Symbol类型数据不容易区分</span>
    <span class="token keyword">let</span> s0 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

    <span class="token number">2.</span><span class="token comment">// Symbol调用 加参数 进行描述.  参数只是描述作用/区分别的Symbol</span>
    <span class="token keyword">let</span> s1 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> s2 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>
    <span class="token keyword">let</span> s3 <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'b'</span><span class="token punctuation">)</span>
    s1<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Symbol(a)'</span>
    s2<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Symbol(b)'</span>
    s3<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 'Symbol(b)'</span>
    s2和s3都是使用b进行描述<span class="token punctuation">,</span>但是s2和s3永远不相等
    s2 <span class="token operator">===</span> s3 <span class="token comment">//false</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h3 id="symbol-给对象做属性"><a href="#symbol-给对象做属性" aria-hidden="true" class="header-anchor">#</a> Symbol()给对象做属性</h3> <ul><li>没有重名覆盖的问题</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    
    需要<span class="token punctuation">:</span> 我们有个不知道有多少属性和方法的对象Obj添加fn方法

    <span class="token comment">// 错误的Symbol写法</span>
    <span class="token keyword">var</span> a <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span><span class="token number">1</span> <span class="token comment">// 这种写法a表示字符串,所以下面obj[a] 是undefined , obj['a']是1</span>
    <span class="token punctuation">}</span>
    obj<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token comment">// undefined</span>
    obj<span class="token punctuation">[</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token comment">// 1</span>

    <span class="token comment">// 正确的Symbol写法</span>
    <span class="token keyword">let</span> b <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token punctuation">[</span>b<span class="token punctuation">]</span><span class="token punctuation">:</span><span class="token number">1</span>
    <span class="token punctuation">}</span>
    obj<span class="token punctuation">[</span>b<span class="token punctuation">]</span>  <span class="token comment">// 1</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h2 id="_2-9-set类型"><a href="#_2-9-set类型" aria-hidden="true" class="header-anchor">#</a> 2.9 Set类型</h2> <ul><li>可以理解成项不能重复的数组</li> <li>内容长度 new Set().size</li> <li>1.接收伪数组/数组创建set</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token comment">// s === [1,undefiend,2]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><ul><li>2.处理数组/伪数组去重</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">1</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
    <span class="token comment">// 1</span>
    <span class="token keyword">let</span> newArr <span class="token operator">=</span> Array<span class="token punctuation">.</span><span class="token function">from</span><span class="token punctuation">(</span>s<span class="token punctuation">)</span>
    <span class="token comment">// 2</span>
    <span class="token keyword">let</span> newArr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token operator">...</span>new <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">]</span>

    newArr <span class="token operator">===</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ul><li>3.实例内容操作方法</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token number">1</span><span class="token comment">// 添加内容 add 返回Set结构</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    s<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span><span class="token number">5</span><span class="token punctuation">)</span>
    <span class="token number">2</span><span class="token comment">// 删除内容 delete 返回布尔值</span>
    s<span class="token punctuation">.</span><span class="token function">delete</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token number">3</span><span class="token comment">// 检测内容 has  返回布尔值</span>
    s<span class="token punctuation">.</span><span class="token function">has</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token number">4</span><span class="token comment">// 清空内容 clear 没有返回值</span>
    s<span class="token punctuation">.</span><span class="token function">clear</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><ul><li>4.实例遍历操作
<ul><li>.keys()</li> <li>.values()</li> <li>.entries()</li> <li>.forEach()</li> <li>.map()</li> <li>.filter()</li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token number">1</span><span class="token comment">// Set数据结构没有键名, 所以keys() 和 values() 返回的都是值Iterator</span>
    <span class="token punctuation">.</span><span class="token function">keys</span><span class="token punctuation">(</span><span class="token punctuation">)</span>  <span class="token punctuation">.</span><span class="token function">values</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token number">2</span><span class="token comment">// entries() 返回的是对象项组成的Iterator. 键值对是匿名函数</span>
    <span class="token keyword">let</span> s <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    s<span class="token punctuation">.</span><span class="token function">entries</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// SetIterator( {1=&gt;1} , {2=&gt;2} , {3=&gt;3} )</span>
    <span class="token number">3</span><span class="token comment">//forEach , map , filter 和数组中使用相同</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-10-map类型"><a href="#_2-10-map类型" aria-hidden="true" class="header-anchor">#</a> 2.10 Map类型</h2> <ul><li>对象在储存数据的时候只能允许字符串做属性</li> <li>Map数据允许任意数据类型做属性.</li> <li>初始化Map: 空参数 或 二维数组</li> <li>基于浏览器的支持清空选择使用Set和Map</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">var</span> m <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> m2 <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
        <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span>
        <span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span>
        <span class="token punctuation">,</span><span class="token punctuation">[</span><span class="token number">3</span><span class="token punctuation">,</span><span class="token string">'c'</span><span class="token punctuation">]</span>
    <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token comment">// m2 === {1 =&gt; &quot;a&quot;, 2 =&gt; &quot;b&quot;, 3 =&gt; &quot;c&quot;}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="_2-11-proxy和reflect"><a href="#_2-11-proxy和reflect" aria-hidden="true" class="header-anchor">#</a> 2.11 Proxy和Reflect</h2> <h3 id="reflect对象"><a href="#reflect对象" aria-hidden="true" class="header-anchor">#</a> Reflect对象</h3> <ul><li>未来对象属性方法只添加到Reflect上</li> <li>与Object很像,做了很多优化
<ul><li>Reflect.defineProperty() 优化了参数对象不能设置属性时的报错行为.</li> <li>Reflect.has(target , key) 检测target中是否存在key,返回布尔值. 有返回值 ,优化了 Object的 in 关键字</li> <li>Reflect.deleteProperty(target , key) 删除target中的key属性. 有返回值, 优化了 Object的 delete关键字</li> <li>Reflect.get(target , key , this指向对象)</li> <li>Reflect.set(target , key , value , this指向对象)</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    Reflect<span class="token punctuation">.</span>get

    <span class="token keyword">let</span> o1 <span class="token operator">=</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">,</span>
        <span class="token keyword">get</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>a<span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> o2 <span class="token operator">=</span> <span class="token punctuation">{</span>
        a<span class="token punctuation">:</span><span class="token number">2</span>
    <span class="token punctuation">}</span>
    Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span> o1 <span class="token punctuation">,</span> <span class="token string">'f1'</span> <span class="token punctuation">,</span> o2 <span class="token punctuation">)</span> <span class="token comment">// 2  修改o1内部f1函数调用时的this指向,为o2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div></li></ul> <h3 id="proxy对象"><a href="#proxy对象" aria-hidden="true" class="header-anchor">#</a> Proxy对象</h3> <ul><li>在操作对象之前必须要调用的一个代理. 属于元编程</li> <li>Proxy构造有两个参数
<ul><li>target    : 拦截的对象</li> <li>handler   : 拦截发生时的操作</li></ul></li> <li>Proxy如果要起作用,一定要操作Proxy的实例<div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token number">1</span> 所有属性拦截
    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span><span class="token punctuation">}</span>
    obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj<span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span> target <span class="token punctuation">,</span> property <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">35</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    proxy<span class="token punctuation">.</span>a <span class="token comment">//35</span>
    proxy<span class="token punctuation">.</span>b <span class="token comment">//35</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div></li> <li>拦截器操作属性一览
<ul><li><p>get( target , name , dataObj ){}</p> <ul><li>获取Proxy实例属性时触发调用</li> <li>target 代理对象</li> <li>name 操作属性</li> <li>dataObj 如果需要修改this指向,提供数据的的this对象</li></ul></li> <li><p>set(target , name , value , dataObj){}</p> <ul><li>设置Proxy实例属性值触发</li> <li>value 修改传入的新值</li></ul></li> <li><p>has(target , name)</p> <ul><li>检测target中是否函数name属性</li></ul></li> <li><p>deleteProperty( target , name )</p> <ul><li>删除target中name属性</li></ul></li> <li><p>ownKeys(target)</p> <ul><li>返回target中所有可以遍历的属性. Object.keys()只返回可遍历的</li></ul></li> <li><p>applay(target , this指向对象, 实参伪数组 ){}</p> <ul><li>调用Proxy实例(做函数调用)时触发</li></ul></li> <li><p>construct(target , 实参伪数组){}</p> <ul><li>把Proxy实例做构造函数(new px实例)时触发</li></ul></li></ul></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> handler <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span>target <span class="token punctuation">,</span> propertyName<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>propertyName <span class="token operator">===</span> <span class="token string">'prototye'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">return</span> target<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token keyword">set</span><span class="token punctuation">(</span>target <span class="token punctuation">,</span> propertyName <span class="token punctuation">,</span> value <span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> propertyName <span class="token operator">===</span> <span class="token string">'age'</span> <span class="token operator">&amp;&amp;</span> Number<span class="token punctuation">.</span><span class="token function">isInteger</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span> <span class="token punctuation">)</span><span class="token punctuation">{</span>
                target<span class="token punctuation">[</span>propertyName<span class="token punctuation">]</span> <span class="token operator">=</span> value
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">apply</span><span class="token punctuation">(</span><span class="token parameter">target <span class="token punctuation">,</span>thisBinding<span class="token punctuation">,</span> args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token string">'做函数调用'</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span>
        <span class="token function">construct</span><span class="token punctuation">(</span><span class="token parameter">target <span class="token punctuation">,</span> args</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">'做构造'</span> <span class="token punctuation">,</span> value<span class="token punctuation">:</span>args<span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">]</span> <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span><span class="token punctuation">{</span>a<span class="token punctuation">:</span><span class="token number">1</span><span class="token punctuation">}</span><span class="token punctuation">,</span> handler<span class="token punctuation">)</span>

    proxy<span class="token punctuation">.</span>prototype <span class="token operator">===</span> <span class="token class-name">Object</span><span class="token punctuation">.</span>prototype <span class="token comment">// true</span>
    proxy<span class="token punctuation">.</span>a <span class="token comment">// 1</span>
    <span class="token function">proxy</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 做函数调用</span>
    <span class="token keyword">new</span> <span class="token class-name">proxy</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">)</span> <span class="token comment">// { name:'做构造' , ' value: 1'}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>Proxy拦截操作属性函数内的this 指向 当前proxy实例</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">let</span> proxy <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj <span class="token punctuation">,</span> <span class="token punctuation">{</span>
        <span class="token keyword">get</span><span class="token punctuation">(</span>target <span class="token punctuation">,</span> name<span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>name <span class="token operator">===</span> <span class="token string">'f1'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>

    obj<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// obj</span>
    proxy<span class="token punctuation">.</span><span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// proxy</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><h3 id="使用proxy完成观察者"><a href="#使用proxy完成观察者" aria-hidden="true" class="header-anchor">#</a> 使用Proxy完成观察者</h3> <ol><li>给obj添加get拦截器,所有使用对象Obj的更新函数 ,存放在 updateSets中</li> <li>给obj添加set拦截器,拦截器中调用updateSets中的更新函数</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token number">1</span><span class="token comment">// 准备观察者函数集合</span>
<span class="token keyword">let</span> updateSets <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
 <span class="token comment">// 更新数据函数</span>
<span class="token keyword">function</span> <span class="token function">updateDom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token number">2</span><span class="token comment">// 准备对象obj</span>
<span class="token keyword">let</span> obj <span class="token operator">=</span> <span class="token punctuation">{</span> name<span class="token punctuation">:</span><span class="token string">'zs'</span> <span class="token punctuation">}</span>
<span class="token number">3</span><span class="token comment">// 给obj添加拦截器, </span>
obj <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Proxy</span><span class="token punctuation">(</span>obj <span class="token punctuation">,</span> <span class="token punctuation">{</span>
    <span class="token number">4</span><span class="token comment">// 使用obj的就添加到updateSets中</span>
    <span class="token keyword">get</span><span class="token punctuation">(</span>target <span class="token punctuation">,</span> property <span class="token punctuation">,</span> dataObj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token number">5</span><span class="token comment">// 保证obj的属性值正常获取</span>
        Reflect<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span>target <span class="token punctuation">,</span> proterty <span class="token punctuation">,</span> dataObj<span class="token punctuation">)</span>
        <span class="token number">6</span><span class="token comment">// 收集监视者</span>
        updateSets<span class="token punctuation">.</span><span class="token function">add</span><span class="token punctuation">(</span>updateDom1<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>   

    <span class="token number">7</span> <span class="token comment">//修改set做数据更新调用</span>
    <span class="token keyword">set</span><span class="token punctuation">(</span>target <span class="token punctuation">,</span> property <span class="token punctuation">,</span> value <span class="token punctuation">,</span> dataObj<span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token number">8</span> <span class="token comment">// 保证正常数据修改</span>
        <span class="token function">Reflect</span><span class="token punctuation">(</span> target <span class="token punctuation">,</span> property <span class="token punctuation">,</span> value <span class="token punctuation">,</span> dataObj <span class="token punctuation">)</span>
        <span class="token number">9</span> <span class="token comment">// 触发数据更新 , 把sets中存放的所有数据更新函数 都触发一遍</span>
        updateSets<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">itemFn</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token function">itemFn</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br></div></div><h2 id="_2-12-symbol在单例模式中使用"><a href="#_2-12-symbol在单例模式中使用" aria-hidden="true" class="header-anchor">#</a> 2.12 Symbol在单例模式中使用</h2> <ul><li>模块文件被任意引用时都返回同一个实例</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token comment">// commonjs模块内:</span>
<span class="token comment">// 1 准备构造</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token comment">// 2 判断全局环境中存不存在A实例, 如果有就直接返回, 如果没有就创建</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>global<span class="token punctuation">.</span>a<span class="token punctuation">)</span><span class="token punctuation">{</span>
    global<span class="token punctuation">.</span>a <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
moduel<span class="token punctuation">.</span>exports <span class="token operator">=</span> global<span class="token punctuation">.</span>a


单例模式的问题<span class="token punctuation">:</span><span class="token operator">/</span><span class="token operator">/</span> 上面写法<span class="token punctuation">,</span>在全局添加容易出现覆盖问题<span class="token punctuation">:</span>所以要使用Symbol做属性
<span class="token keyword">const</span> a <span class="token operator">=</span> <span class="token function">Symbol</span><span class="token punctuation">(</span><span class="token string">'a'</span><span class="token punctuation">)</span>
<span class="token keyword">function</span> <span class="token constant">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
<span class="token keyword">if</span><span class="token punctuation">(</span><span class="token operator">!</span>global<span class="token punctuation">[</span>a<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    global<span class="token punctuation">[</span>a<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">A</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
module<span class="token punctuation">.</span>exports <span class="token operator">=</span> global<span class="token punctuation">[</span>a<span class="token punctuation">]</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h2 id="_2-13-iterator"><a href="#_2-13-iterator" aria-hidden="true" class="header-anchor">#</a> 2.13 Iterator</h2> <ul><li>遍历数组根据索引</li> <li>遍历SetMap不根据索引</li> <li>为了统一 Array,Set,Map都属于Iterator</li> <li>Iterator数据都可以使用for..of遍历</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    遍历数组<span class="token punctuation">,</span>Set<span class="token punctuation">,</span>Map
    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span>
    <span class="token keyword">let</span> <span class="token keyword">set</span> <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Set</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
    <span class="token keyword">let</span> map <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Map</span><span class="token punctuation">(</span><span class="token punctuation">[</span> <span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token string">'a'</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token string">'b'</span><span class="token punctuation">]</span> <span class="token punctuation">]</span><span class="token punctuation">)</span>

    <span class="token number">1</span> <span class="token function">都可以使用forEach</span><span class="token punctuation">(</span><span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span> index</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
        map和<span class="token keyword">set</span>没有索引<span class="token punctuation">,</span> 所以item和index都是值

        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>i</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item <span class="token punctuation">,</span> i <span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 0 1 ; 12 ; 23</span>

        <span class="token keyword">set</span><span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 1 2 3 </span>

        map<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">value<span class="token punctuation">,</span>attr</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>value<span class="token punctuation">,</span>attr<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
        <span class="token comment">// 1 'a' ; 2 'b' ; </span>

    <span class="token number">2</span> 都可以使用<span class="token keyword">for</span><span class="token operator">...</span>of循环 

    <span class="token keyword">for</span><span class="token punctuation">(</span> item <span class="token keyword">of</span> Iterator <span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><h2 id="_2-14-generator函数"><a href="#_2-14-generator函数" aria-hidden="true" class="header-anchor">#</a> 2.14 Generator函数</h2> <h3 id="_1-生成器作用"><a href="#_1-生成器作用" aria-hidden="true" class="header-anchor">#</a> 1.生成器作用</h3> <ul><li>将代码进行分段部署,Generator中使用yield 和 return 表示各个阶段的代码内容</li> <li>Generator函数返回的Iterator对象</li> <li>使用Generator生成的生成器配合next() 把内部代码 分阶段调用(惰性调用)</li> <li>写法: function*fn(){}, *位置没有固定要求, 只要在function和函数名之间就可以</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span> <span class="token function">status1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'状态1触发'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token keyword">function</span> <span class="token function">status2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'状态2触发'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">genera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token function">status1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token keyword">yield</span> <span class="token function">status2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
        <span class="token comment">// ...</span>
        <span class="token keyword">return</span> console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">'全部都触发了'</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> gene <span class="token operator">=</span> <span class="token function">genera</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    gene<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 状态1触发</span>
    gene<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 状态2触发</span>
    gene<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// 全部都触发了</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br></div></div><h3 id="_2-yield语句和return语句的区别"><a href="#_2-yield语句和return语句的区别" aria-hidden="true" class="header-anchor">#</a> 2.yield语句和return语句的区别:</h3> <pre><code>* 每次next调用都返回 yield或return后面表达式的值
* yield语句可以有多个,可以多次触发
* yield语句不能使用在普通函数中
* yield在语句中使用时需要放在小括号里
* return 语句可以有多个,只触发一次
* return 语句可以使用在普通函数中
</code></pre> <h3 id="_3-generator函数内阶段代码不next不执行"><a href="#_3-generator函数内阶段代码不next不执行" aria-hidden="true" class="header-anchor">#</a> 3.Generator函数内阶段代码不next不执行</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">let</span> arr <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token punctuation">[</span><span class="token number">1</span><span class="token punctuation">,</span><span class="token number">2</span><span class="token punctuation">,</span><span class="token number">3</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">4</span><span class="token punctuation">,</span><span class="token number">5</span><span class="token punctuation">,</span><span class="token number">6</span><span class="token punctuation">]</span> <span class="token punctuation">,</span> <span class="token punctuation">[</span><span class="token number">7</span><span class="token punctuation">,</span><span class="token number">8</span><span class="token punctuation">,</span><span class="token number">9</span><span class="token punctuation">]</span><span class="token punctuation">]</span>
    
    <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        arr<span class="token punctuation">.</span><span class="token function">forEach</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">item<span class="token punctuation">,</span>index</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span><span class="token keyword">typeof</span> item <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">yield</span> item
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">f1</span><span class="token punctuation">(</span>item<span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token function">f1</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span>
    <span class="token comment">// 报错:  forEach的回调是普通函数,内部不允许使用yield</span>

    <span class="token function-variable function">修改为</span><span class="token punctuation">:</span>
    <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token parameter">arr</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">for</span><span class="token punctuation">(</span><span class="token keyword">let</span> i <span class="token operator">=</span> <span class="token number">0</span> <span class="token punctuation">;</span> i <span class="token operator">&lt;</span> arr<span class="token punctuation">.</span>length <span class="token punctuation">;</span> i<span class="token operator">++</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span> <span class="token keyword">typeof</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span> <span class="token operator">===</span> <span class="token string">'number'</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
                <span class="token keyword">yield</span> arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span>
            <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
                <span class="token keyword">yield</span><span class="token operator">*</span> <span class="token function">f1</span><span class="token punctuation">(</span>arr<span class="token punctuation">[</span>i<span class="token punctuation">]</span><span class="token punctuation">)</span>
            <span class="token punctuation">}</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">var</span> f <span class="token keyword">of</span> <span class="token function">f1</span><span class="token punctuation">(</span>arr<span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>f<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 1, 2, 3, 4, 5, 6</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br><span class="line-number">29</span><br><span class="line-number">30</span><br></div></div><h3 id="_4-next传参机制"><a href="#_4-next传参机制" aria-hidden="true" class="header-anchor">#</a> 4.next传参机制</h3> <pre><code>- 如果Generator函数需要参数, 在next调用的时候如果没有参数,则上个次yield的结果就是undefined
</code></pre> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">genera</span><span class="token punctuation">(</span><span class="token parameter">num</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">var</span> x <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> num <span class="token operator">+</span> <span class="token number">10</span><span class="token punctuation">)</span>
        <span class="token keyword">var</span> y <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> <span class="token number">2</span> <span class="token operator">*</span> x<span class="token punctuation">)</span>
        <span class="token keyword">var</span> z <span class="token operator">=</span> <span class="token punctuation">(</span><span class="token keyword">yield</span> y<span class="token operator">+</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">let</span> gene <span class="token operator">=</span> <span class="token function">genera</span><span class="token punctuation">(</span><span class="token punctuation">)</span>


    gene<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span> 
    <span class="token comment">// 执行到第一阶段 yield返回值是20</span>

    gene<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token punctuation">)</span>     
    <span class="token comment">// 执行第二阶段, 没有参数:上次yield结果表示undefined</span>
    <span class="token number">1</span><span class="token comment">// 本次next没有传参,表示上次yield的结果是undefined,  </span>
    <span class="token number">2</span><span class="token comment">// 即 x = yield undefined;  </span>
    <span class="token number">3</span><span class="token comment">// yield接收的是 undefined * 2 === NaN</span>

    gene<span class="token punctuation">.</span><span class="token function">next</span><span class="token punctuation">(</span><span class="token number">10</span><span class="token punctuation">)</span>
    <span class="token comment">// 执行第三阶段, 参数10 表示上阶段执行结果是10</span>
    <span class="token comment">// 继续执行:  var y = 10</span>
    <span class="token comment">// 本阶段结束: yield 10+1 , 结果是11</span>
    <span class="token comment">// yiled左侧等号部分 不执行,等待下次next调用</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="_5-for-of处理generator"><a href="#_5-for-of处理generator" aria-hidden="true" class="header-anchor">#</a> 5.for..of处理Generator</h3> <ul><li>生成器的next调用 或者 配置 for..of执行时返回值为: {value:yield表达式值 , done:是否执行到了return}</li> <li>如果执行到了return语句 done的值就是true ; for..of语句执行遇到done为true就结束循环.</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">genera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">yield</span> <span class="token number">1</span>
        <span class="token keyword">yield</span> <span class="token number">2</span>
        <span class="token keyword">yield</span> <span class="token number">3</span>
        <span class="token keyword">yield</span> <span class="token number">4</span>
        <span class="token keyword">yield</span> <span class="token number">5</span>
        <span class="token keyword">return</span> <span class="token number">6</span>
    <span class="token punctuation">}</span>

    <span class="token keyword">for</span><span class="token punctuation">(</span> <span class="token keyword">let</span> stateVal <span class="token keyword">of</span> <span class="token function">genera</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>stateVal<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 1 2 3 4 5 </span>
    <span class="token comment">// for...of 执行遇到done值为true 结束循环</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><h3 id="_6-generator-for-of实现斐波那契"><a href="#_6-generator-for-of实现斐波那契" aria-hidden="true" class="header-anchor">#</a> 6.Generator+for..of实现斐波那契</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">function</span><span class="token operator">*</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">let</span> <span class="token punctuation">[</span>prev<span class="token punctuation">,</span> curr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span><span class="token number">0</span><span class="token punctuation">,</span> <span class="token number">1</span><span class="token punctuation">]</span><span class="token punctuation">;</span>
  <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token punctuation">;</span><span class="token punctuation">;</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token punctuation">[</span>prev<span class="token punctuation">,</span> curr<span class="token punctuation">]</span> <span class="token operator">=</span> <span class="token punctuation">[</span>curr<span class="token punctuation">,</span> prev <span class="token operator">+</span> curr<span class="token punctuation">]</span><span class="token punctuation">;</span>
    <span class="token keyword">yield</span> curr<span class="token punctuation">;</span>
  <span class="token punctuation">}</span>
<span class="token punctuation">}</span>

<span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token keyword">let</span> n <span class="token keyword">of</span> <span class="token function">fibonacci</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
  <span class="token keyword">if</span> <span class="token punctuation">(</span>n <span class="token operator">&gt;</span> <span class="token number">1000</span><span class="token punctuation">)</span> <span class="token keyword">break</span><span class="token punctuation">;</span>
  console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>n<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h3 id="_7-yield-语法"><a href="#_7-yield-语法" aria-hidden="true" class="header-anchor">#</a> 7.yield*语法</h3> <ul><li>在一个Generator函数调用其他Generator函数默认不生效</li> <li>使用 yield* genera() 可以调用</li></ul> <h2 id="_2-15-promise"><a href="#_2-15-promise" aria-hidden="true" class="header-anchor">#</a> 2.15 Promise</h2> <h3 id="_1-简单理解"><a href="#_1-简单理解" aria-hidden="true" class="header-anchor">#</a> 1.简单理解:</h3> <ul><li>存放未来的异步函数调用的容器</li> <li>按照语法让异步操作更简单</li> <li>特点:
<ol><li>状态独立,pendding , resolved , rejected,三种状态自身决定</li> <li>状态一旦改变不能再改变. 状态确定了之后任意时间段获取状态值都是固定的.</li></ol></li></ul> <h3 id="_2-语法"><a href="#_2-语法" aria-hidden="true" class="header-anchor">#</a> 2.语法:</h3> <ul><li>实例化</li> <li>将异步操作放在Promise容器中</li> <li>根据本次异步操作的结果设置状态</li> <li>成功状态会顺序调用.then()并传参</li> <li>失败状态会直接调用.catch()</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">let</span> p <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span>resovle <span class="token punctuation">,</span> reject<span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">let</span> xhr <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">XMLHttpRquest</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token comment">// xhr.open xhr.setRequestHeader() </span>
    xhr<span class="token punctuation">.</span><span class="token function-variable function">onreadystatechange</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">if</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>status <span class="token operator">==</span> <span class="token number">200</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span><span class="token constant">JSON</span><span class="token punctuation">.</span><span class="token function">parse</span><span class="token punctuation">(</span>xhr<span class="token punctuation">.</span>responseText<span class="token punctuation">)</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token keyword">else</span><span class="token punctuation">{</span>
            <span class="token function">reject</span><span class="token punctuation">(</span><span class="token string">'netWork Error'</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
p<span class="token punctuation">.</span>
<span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resdata</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
    <span class="token function">template</span><span class="token punctuation">(</span><span class="token string">'id'</span> <span class="token punctuation">,</span> resdata<span class="token punctuation">)</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">errorInfo</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><h3 id="promise-all-批量接收"><a href="#promise-all-批量接收" aria-hidden="true" class="header-anchor">#</a> Promise.all() 批量接收</h3> <ul><li>将多个promise实例包装成一个新的promise</li> <li>多个参数promise状态都为fullfilled,新的promsie会接收参数promise中resovle传参组成的数组</li> <li>只要参数promise中有一个rejected , 新的promise状态就是promised</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 3个Promise实例, p1,p2,p3</span>
    <span class="token keyword">let</span> pAll <span class="token operator">=</span> Promise<span class="token punctuation">.</span><span class="token function">all</span><span class="token punctuation">(</span><span class="token punctuation">[</span>p1<span class="token punctuation">,</span>p2<span class="token punctuation">,</span>p3<span class="token punctuation">]</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><h3 id="promise-race-优先接收"><a href="#promise-race-优先接收" aria-hidden="true" class="header-anchor">#</a> Promise.race() 优先接收</h3> <ul><li>多个promise实例包装成一个新的promise</li> <li>结果promise接收参数promise中最早完成resolved状态</li></ul> <h3 id="promise-resolve"><a href="#promise-resolve" aria-hidden="true" class="header-anchor">#</a> Promise.resolve()</h3> <ul><li>将一个对象包装成promise</li> <li>基本实现</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
    等价于
    <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token parameter">resolve</span> <span class="token operator">=&gt;</span> <span class="token function">resolve</span><span class="token punctuation">(</span>$<span class="token punctuation">.</span><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token string">'/a'</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br></div></div><ul><li>参数组成:
<ol><li>参数是promise实例</li> <li>参数是thenable对象(有then方法的对象)</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    如<span class="token punctuation">:</span>
    <span class="token keyword">let</span> o <span class="token operator">=</span> <span class="token punctuation">{</span>
        <span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span>
    <span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><ol start="3"><li>参数是一个原始值,或者不含then方法. 此时会直接将promise状态锁定为resolved</li> <li>不带参数. 为了获取到一个promise实例,可以直接使用Promise.resolve()
<ul><li>注意:<code>立即resolve的promise实例,是在本次事件循环结束执行,而不是下次事件队列首部</code></li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    window<span class="token punctuation">.</span><span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">0</span><span class="token punctuation">)</span>
    Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">2</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">3</span><span class="token punctuation">)</span>

    触发<span class="token punctuation">:</span> <span class="token number">3</span> <span class="token number">2</span> <span class="token number">1</span>
    主线程执行<span class="token operator">--</span><span class="token number">3</span>
    本轮事件执行结束<span class="token operator">--</span><span class="token number">2</span>
    下次事件循环开始<span class="token operator">--</span><span class="token number">1</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div></li></ol></li></ul> <h3 id="promise-prototype-finally实现"><a href="#promise-prototype-finally实现" aria-hidden="true" class="header-anchor">#</a> Promise.prototype.finally实现</h3> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token comment">// 目的,不论如何都要执行finally的callback</span>

    <span class="token class-name">Promise</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">finally</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">callback</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token comment">//在内部创建一个Promise实例</span>
        <span class="token comment">// 通过本次实例调用callback</span>
        <span class="token keyword">let</span> constructor <span class="token operator">=</span> <span class="token keyword">this</span><span class="token punctuation">.</span>constructor
        Promise<span class="token punctuation">.</span><span class="token function">resolve</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span>callback<span class="token punctuation">)</span>
    <span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br></div></div><h3 id="promise-generator"><a href="#promise-generator" aria-hidden="true" class="header-anchor">#</a> Promise+Generator</h3> <ul><li>Generator管理函数流程,遇到异步操作时一般返回Promise实例</li></ul> <h2 id="_2-15-async和异步操作"><a href="#_2-15-async和异步操作" aria-hidden="true" class="header-anchor">#</a> 2.15 Async和异步操作</h2> <h3 id="_1-异步编程的方式"><a href="#_1-异步编程的方式" aria-hidden="true" class="header-anchor">#</a> 1.异步编程的方式</h3> <pre><code>1. 回调
    - 回调地狱
2. 事件监听
3. 发布订阅
4. Promise
    - 一堆then,语意不明
5. Generator
    - 将异步的各个阶段声明在Generator的各个yield中,分步骤调用Generator函数
    - 从各个阶段返回的指针对象{ value, done} 获取数据
    - 暂停执行: yield
    - 回复执行: next
    - `流程管理`很不方便
5. Async
</code></pre> <h3 id="_2-异步的理解"><a href="#_2-异步的理解" aria-hidden="true" class="header-anchor">#</a> 2. 异步的理解</h3> <ul><li>将一个任务分成两个阶段执行, 第一阶段执行结束就执行第二阶段需要的准备工作, 等第二阶段的准备工作完成再执行第二阶段</li> <li>如: 浏览器向服务器请求一批数据, 在数据响应之前浏览器继续解析DOM,CSS,当数据返回时继续处理数据</li> <li>相对而言:同步就是浏览器请求数据时,在数据响应之前什么都不做</li></ul> <h2 id="_2-16-async"><a href="#_2-16-async" aria-hidden="true" class="header-anchor">#</a> 2.16 Async</h2> <h3 id="_1-async的原理"><a href="#_1-async的原理" aria-hidden="true" class="header-anchor">#</a> 1.async的原理</h3> <ul><li>async就是Generator的语法糖</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>依次读取两个文件

<span class="token comment">// 引入node文件读取模块</span>
<span class="token keyword">const</span> fs <span class="token operator">=</span> <span class="token function">require</span><span class="token punctuation">(</span><span class="token string">'fs'</span><span class="token punctuation">)</span>
<span class="token comment">// 文件读取函数封装</span>
<span class="token keyword">var</span> <span class="token function-variable function">readFile</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token parameter">fileName</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">return</span> <span class="token keyword">new</span> <span class="token class-name">Promise</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">resolve <span class="token punctuation">,</span> reject</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span>fileName <span class="token punctuation">,</span> <span class="token punctuation">(</span><span class="token parameter">err<span class="token punctuation">,</span>data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">if</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span> <span class="token function">reject</span><span class="token punctuation">(</span>err<span class="token punctuation">)</span>
            <span class="token function">resolve</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
        <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token number">1</span> <span class="token comment">// async写法</span>
<span class="token keyword">let</span> <span class="token function-variable function">readFile</span> <span class="token operator">=</span> <span class="token keyword">async</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/a.js'</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> f2 <span class="token operator">=</span> <span class="token keyword">await</span> fs<span class="token punctuation">.</span><span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/b.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

<span class="token number">2</span> <span class="token comment">// Generator写法</span>
<span class="token keyword">var</span> <span class="token function-variable function">gen</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token operator">*</span> <span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
    <span class="token keyword">var</span> f1 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/a.js'</span><span class="token punctuation">)</span>
    <span class="token keyword">var</span> f2 <span class="token operator">=</span> <span class="token keyword">yield</span> <span class="token function">readFile</span><span class="token punctuation">(</span><span class="token string">'/b.js'</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br></div></div><ul><li>总结:
<ul><li>async就是把Generator的<code>*</code>换成了<code>async</code>, 把<code>yield</code>换成了<code>await</code></li> <li>async就是含有多个异步操作的Promise实例.await就是内部异步操作间关联的then</li></ul></li> <li>使用规则:
<ol><li>async包装的函数执行结果是个Promise对象, async包装函数中的return的是resolve的参数</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token number">123</span>
    <span class="token punctuation">}</span>
    <span class="token function">f1</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token comment">// 打印123</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><ol start="2"><li>async修饰函数执行结果Promise对象,必须要等到内部所有的await执行结束才能确定最终状态<br>
也就是: async修饰函数内所有的await执行结束,才能执行then的回调</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code>    <span class="token keyword">async</span> <span class="token keyword">function</span> <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
        console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token number">1</span><span class="token punctuation">)</span>
        <span class="token keyword">await</span> <span class="token function">setTimeout</span><span class="token punctuation">(</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token number">2</span>
        <span class="token punctuation">}</span><span class="token punctuation">,</span><span class="token number">1000</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
    <span class="token function">f2</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">data</span><span class="token operator">=&gt;</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>data<span class="token punctuation">)</span><span class="token punctuation">)</span>

    打印<span class="token number">1</span>  
    <span class="token number">1</span>秒后打印<span class="token number">2</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br></div></div></li></ul> <h2 id="_2-17-class类"><a href="#_2-17-class类" aria-hidden="true" class="header-anchor">#</a> 2.17 Class类</h2> <ul><li>因为Js是面向过程语言, 原生面向过程的语言如: java,php的特性都不原生支持</li> <li>面向对象3大特性:
<ul><li>封装</li> <li>继承</li> <li>多态</li></ul></li> <li>Js只能模拟, 所以推出了Class'类'的定义: 本质是用object.prototype进行模拟</li></ul> <div class="language-js line-numbers-mode"><pre class="language-js"><code>原生<span class="token punctuation">:</span>
	<span class="token number">1</span><span class="token punctuation">,</span> 使用构造函数<span class="token operator">+</span><span class="token keyword">new</span> <span class="token function-variable function">创建对象</span><span class="token punctuation">:</span>
	<span class="token keyword">function</span> <span class="token function">Cars</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
		<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
		<span class="token keyword">this</span><span class="token punctuation">.</span>price <span class="token operator">=</span> price
	<span class="token punctuation">}</span>
	<span class="token class-name">Cars</span><span class="token punctuation">.</span>prototype<span class="token punctuation">.</span><span class="token function-variable function">run</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'轰轰轰'</span><span class="token punctuation">)</span><span class="token punctuation">}</span>
	

	<span class="token number">2</span><span class="token punctuation">,</span> 使用Class关键字
	<span class="token keyword">class</span> <span class="token class-name">Cars</span> <span class="token punctuation">{</span>
		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token parameter">name</span><span class="token punctuation">)</span><span class="token punctuation">{</span>	<span class="token comment">// 构造函数</span>
			<span class="token keyword">this</span><span class="token punctuation">.</span>name <span class="token operator">=</span> name
		<span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token comment">// 原型方法</span>
		<span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">.</span>name<span class="token operator">+</span><span class="token string">'轰轰轰'</span><span class="token punctuation">)</span>
		<span class="token punctuation">}</span>
	<span class="token punctuation">}</span>
	
	使用
	<span class="token keyword">let</span> volvo <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">Cars</span><span class="token punctuation">(</span><span class="token string">'沃尔沃'</span><span class="token punctuation">)</span>
	volor<span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br></div></div><h3 id="class注意项"><a href="#class注意项" aria-hidden="true" class="header-anchor">#</a> class注意项:</h3> <ol><li>实例化要用new关键字</li> <li>class没有作用域提升,一定要先声明,再使用</li> <li>class名只在类内部有效:</li></ol> <div class="language-js line-numbers-mode"><pre class="language-js"><code><span class="token keyword">const</span> MyClass <span class="token operator">=</span> <span class="token keyword">class</span> <span class="token class-name">My</span><span class="token punctuation">{</span>
		
		<span class="token function">constructor</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">,</span>
		<span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span>
			<span class="token keyword">return</span> My<span class="token punctuation">.</span>name
		<span class="token punctuation">}</span>
	
	<span class="token punctuation">}</span>
	
	My<span class="token punctuation">.</span>name <span class="token comment">// 报错:My未定义</span>
	<span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">MyClass</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token comment">// My</span>

</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="_2-14-generator函数-2"><a href="#_2-14-generator函数-2" aria-hidden="true" class="header-anchor">#</a> 2.14 Generator函数</h2> <h2 id="_2-14-generator函数-3"><a href="#_2-14-generator函数-3" aria-hidden="true" class="header-anchor">#</a> 2.14 Generator函数</h2> <h2 id="_2-14-generator函数-4"><a href="#_2-14-generator函数-4" aria-hidden="true" class="header-anchor">#</a> 2.14 Generator函数</h2> <h2 id="_2-14-generator函数-5"><a href="#_2-14-generator函数-5" aria-hidden="true" class="header-anchor">#</a> 2.14 Generator函数</h2></div> <footer class="page-edit"><!----> <div class="last-updated"><span class="prefix">19/08/29: </span> <span class="time">9/5/2019, 6:08:08 PM</span></div></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/Js_basis/1.ES5.html" class="prev">
          1.ES5
        </a></span> <span class="next"><a href="/Js_basis/3.基础面试题.html">
          3.基础面试题
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/assets/js/app.314208ec.js" defer></script><script src="/assets/js/2.3dbe4ac7.js" defer></script><script src="/assets/js/12.845c0d45.js" defer></script>
  </body>
</html>
